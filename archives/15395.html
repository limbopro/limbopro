
<!DOCTYPE HTML>
<html class="small-scroll-bar no-js bg cool-transparent" lang="zh-Hans">
<head>

<link rel="preload" href="../usr/themes/handsome/assets/libs/bootstrap/css/bootstrap.min.css" as="style">
<link rel="preload" href="../usr/themes/handsome/assets/css/origin/function.min.css" as="style">
<link rel="preload" href="../usr/themes/handsome/assets/css/handsome.min.css" as="style">
<link rel="preload" href="../usr/themes/handsome/assets/css/features/coolopacity.min.css" as="style">
<link rel="preload" href="../usr/themes/handsome/assets/css/features/dark.min.css" as="style">
<link rel="preload" href="../usr/themes/handsome/assets/css/limbopro.css" as="style">
<link rel="preload" href="../usr/plugins/TableOfContents/css/toc_style.css" as="style">
<link rel="preload" href="https://limbopro.com/usr/themes/handsome/assets/libs/bootstrap/fonts/glyphicons-halflings-regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://limbopro.com/usr/themes/handsome/assets/fonts/fontello/fontello.woff" as="font" type="font/woff" crossorigin="anonymous">



<title>利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP） - 毒奶 - 欢迎使用代理访问本站。</title>
<meta name="title" content="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP） - 毒奶 - 欢迎使用代理访问本站。">
<meta name="author" content="毒奶">
<meta name="description" content="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 找出异常IP）">
<meta name="image" content="https://limbopro.com/usr/uploads/2020/01/1957848217.jpg">

<meta itemprop="name" content="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP） - 毒奶 - 欢迎使用代理访问本站。">
<meta itemprop="author" content="毒奶">
<meta itemprop="description" content="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 找出异常IP）">
<meta itemprop="image" content="https://limbopro.com/usr/uploads/2020/01/1957848217.jpg">

<meta property="og:url" content="https://limbopro.com/archives/15395.html">
<meta property="og:type" content="website">
<meta property="og:title" content="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP） - 毒奶 - 欢迎使用代理访问本站。">
<meta property="og:description" content="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 找出异常IP）">
<meta property="og:image" content="https://limbopro.com/usr/uploads/2020/01/1957848217.jpg">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@limboprossr">
<meta name="twitter:creator" content="@limboprossr">
<meta name="twitter:title" content="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP） - 毒奶 - 欢迎使用代理访问本站。">
<meta name="twitter:description" content="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 找出异常IP）">
<meta property="twitter:image" content="https://limbopro.com/usr/uploads/2020/01/1957848217.jpg">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<meta charset="UTF-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">

<meta name="renderer" content="webkit">

<meta name="theme-color" content="#000000" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://www.doubleclickbygoogle.com/" />
<link rel="dns-prefetch" href="https://www.google.com/" />
<link rel="dns-prefetch" href="https://marketingplatform.google.com/" />
<link rel="dns-prefetch" href="https://developers.google.com/" />
<link rel="dns-prefetch" href="https://api.ip.sb/" />
<link rel="dns-prefetch" href="https://adservice.google.com/" />
<link rel="dns-prefetch" href="https://ajax.cloudflare.com/" />
<link rel="dns-prefetch" href="https://pagead2.googlesyndication.com/" />
<link rel="dns-prefetch" href="https://www.google-analytics.com/" />
<link rel="dns-prefetch" href="https://googleads.g.doubleclick.net/" />
<link rel="dns-prefetch" href="https://twitter.com/" />
<link rel="dns-prefetch" href="https://platform.twitter.com/" />
<link rel="dns-prefetch" href="https://ssl.gstaic.com/" />



<title>利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP） - 毒奶 - 欢迎使用代理访问本站。</title>
<link rel="icon" type="image/ico" href="https://limbopro.com/favicon.ico">
<link rel="stylesheet" type="text/css" href="../usr/plugins/TableOfContents/css/toc_style.css" />

<script type="application/ld+json">
    {
    "@context" : "http://schema.org",
    "@type" : "Article",
    "headline" : "利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP） - 毒奶 - 欢迎使用代理访问本站。",
        "description" : "利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 找出异常IP）",
        "keywords" : "NGINX,Shell",
    "author" : [{
    "@type" : "Person",
    "name" : "推特账号",
    "url" : "https://twitter.com/limboprossr"
    },{
    "@type" : "Person",
    "name" : "电报频道",
    "url" : "https://t.me/limboprossr"
    },{
    "@type" : "Person",
    "name" : "Instagram",
    "url" : "https://www.instagram.com/limboprossr"
    }],
    "datePublished" : "2021-04-07",
    "dateModified" : "2021-06-12",
    "inLanguage":["zh"],
        "image" : "https://limbopro.com/usr/uploads/2020/01/1957848217.jpg",
        "url" : "https://limbopro.com/archives/15395.html",
    "publisher" : {
    "@type" : "Organization",
    "name" : "毒奶.inc Copyright"
    }
    }
    </script>

<style>
    /*disqus Ads block with CSS*/
    iframe[sandbox*="allow"]{display:none!important;}
    </style>

<script type="text/javascript">
    
        window['LocalConst'] = {
            //base
            BASE_SCRIPT_URL: 'https://limbopro.com/usr/themes/handsome/',
            BLOG_URL: 'https://limbopro.com/',
            BLOG_URL_N: 'https://limbopro.com',
            STATIC_PATH: 'https://limbopro.com/usr/themes/handsome/assets/',
            BLOG_URL_PHP: 'https://limbopro.com/',
            VDITOR_CDN: 'https://cdn.jsdelivr.net/npm/vditor@3.4.5',
            MATHJAX_SVG_CDN: 'https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js',
            THEME_VERSION: '7.3.12020081501',
            THEME_VERSION_PRO: '7.3.1',

            //comment
            COMMENT_NAME_INFO: '必须填写昵称或姓名',
            COMMENT_EMAIL_INFO: '必须填写电子邮箱地址',
            COMMENT_EMAIL_LEGAL_INFO: '邮箱地址不合法',
            COMMENT_CONTENT_INFO: '必须填写评论内容',
            COMMENT_SUBMIT_ERROR: '提交失败，请重试！',
            COMMENT_CONTENT_LEGAL_INFO: '提交失败,评论被拦截或者进入审核区域',
            COMMENT_CONTENT_CHECK_INFO: '评论进入审核区域，请勿重复评论',
            COMMENT_TITLE: '评论通知',

            //login
            LOGIN_TITLE: '登录通知',
            LOGIN_USERNAME_INFO: '必须填写用户名',
            LOGIN_PASSWORD_INFO: '请填写密码',
            LOGIN_SUBMIT_ERROR: '登录失败，请重新登录',
            LOGIN_SUBMIT_INFO: '用户名或者密码错误，请重试',
            LOGIN_SUBMIT_SUCCESS: '登录成功',
            CLICK_TO_REFRESH: '点击以刷新页面',
            LOGOUT_SUCCESS_REFRESH: '退出成功，正在刷新当前页面',

            LOGOUT_ERROR: '退出失败，请重试',
            LOGOUT_SUCCESS: '退出成功',
            SUBMIT_PASSWORD_INFO: '密码错误，请重试',

            //comment
            ChANGYAN_APP_KEY: '',
            CHANGYAN_CONF: '',

            COMMENT_SYSTEM: '2',
            COMMENT_SYSTEM_ROOT: '0',
            COMMENT_SYSTEM_CHANGYAN: '1',
            COMMENT_SYSTEM_OTHERS: '2',
            EMOJI: '表情',
            COMMENT_NEED_EMAIL: '0',
            COMMENT_REJECT_PLACEHOLDER: '居然什么也不说，哼',
            COMMENT_PLACEHOLDER: '说点什么吧……',

            //pjax
            IS_PJAX: '1',
            IS_PAJX_COMMENT: '',
            PJAX_ANIMATE: 'default',
            PJAX_TO_TOP: '0',
            TO_TOP_SPEED: '100',


            USER_COMPLETED: {"data":""},

            //ui
            OPERATION_NOTICE: '操作通知',
            SCREENSHOT_BEGIN: '正在生成当前页面截图……',
            SCREENSHOT_NOTICE: '点击顶部下载按钮保存当前卡片',
            SCREENSHORT_ERROR: '由于图片跨域原因导致截图失败',
            SCREENSHORT_SUCCESS: '截图成功',

            //music
            MUSIC_NOTICE: '播放通知',
            MUSIC_FAILE: '当前音乐地址无效，自动为您播放下一首',
            MUSIC_FAILE_END: '当前音乐地址无效',
            MUSIC_LIST_SUCCESS: '歌单歌曲加载成功',

            //option
            TOC_TITLE: '文章目录',
            HEADER_FIX: '固定头部',
            ASIDE_FIX: '固定导航',
            ASIDE_FOLDED: '折叠导航',
            ASIDE_DOCK: '置顶导航',
            CONTAINER_BOX: '盒子模型',
            DARK_MODE: '深色模式',
            DARK_MODE_AUTO: '深色模式（自动）',
            DARK_MODE_FIXED: '深色模式（固定）',
            EDITOR_CHOICE: 'origin',


            CDN_NAME: '',
            LAZY_LOAD: '',
            PAGE_ANIMATE: '',
            THEME_COLOR: '14',
            THEME_COLOR_EDIT: 'black-black-black',
            THEME_HEADER_FIX: '1',
            THEME_ASIDE_FIX: '1',
            THEME_ASIDE_FOLDED: '',
            THEME_ASIDE_DOCK: '',
            THEME_CONTAINER_BOX: '1',
            THEME_HIGHLIGHT_CODE: '1',
            THEME_MATHJAX: '1',
            THEME_TOC: '',
            THEME_DARK_MODE: 'light',
            THEME_DARK_MODE_VALUE: 'light',
            SHOW_SETTING_BUTTON: '1',

            THEME_DARK_HOUR: '18',
            THEME_LIGHT_HOUR: '6',
            THUMB_STYLE: '',
            AUTO_READ_MODE: '',

            //代码高亮
            CODE_STYLE_LIGHT: 'dracula',
            CODE_STYLE_DARK: 'dracula',

            //other
            OFF_SCROLL_HEIGHT: '50',
            SHOW_IMAGE_ALT: '1',
            USER_LOGIN: '',
            USE_CACHE: '',
            POST_SPEECH: '1',
        };

        if ('serviceWorker' in navigator) {
            if (LocalConst.USE_CACHE) {
                navigator.serviceWorker.register(LocalConst.BLOG_URL + 'sw.min.js?v=7.3.12020081501')
                    .then(function (reg) {

                    }).catch(function (error) {
                    console.log('cache failed with ' + error); // registration failed
                });
            } else {
                navigator.serviceWorker.getRegistrations()
                    .then(function (registrations) {
                        for (let registration of registrations) {
                            registration.unregister();
                            // 清除缓存
                            window.caches && caches.keys && caches.keys().then(function (keys) {
                                keys.forEach(function (key) {
                                    caches.delete(key);
                                });
                            });
                            console.log("unregister success")
                        }
                    });
            }
        }
    </script>
<script>
            MathJax = {
                tex:{
                    inlineMath: [['$', '$'], ['\\(', '\\)']],
                    macros: {
                        bf: '{\\boldsymbol f}',
                        bu: '{\\boldsymbol u}',
                        bv: '{\\boldsymbol v}',
                        bw: '{\\boldsymbol w}'
                    }
                },
                svg:{
                    fontCache: 'global'
                }
            };
        </script>

<link href="../usr/themes/handsome/assets/libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">

<link rel="stylesheet" href="../usr/themes/handsome/assets/css/origin/function.min.css" type="text/css" />
<link rel="stylesheet" href="../usr/themes/handsome/assets/css/handsome.min.css" type="text/css" />

<link rel="stylesheet" href="../usr/themes/handsome/assets/css/features/coolopacity.min.css" type="text/css" />
<style>
                .cool-transparent .app:before {
                    background-color: rgba(0 , 0, 0, 1) !important;
                    filter: blur(20px);
                }
            </style>

<style type="text/css">
        
        html.bg {
        background: rgba(0 , 0, 0, 1)
        }
        .cool-transparent .off-screen+* .app-content-body {
        background: rgba(0 , 0, 0, 1)
        }
@media (max-width:767px){
    html.bg {
        background: rgba(0 , 0, 0, 1)
        }
        .cool-transparent .off-screen+* .app-content-body {
        background: rgba(0 , 0, 0, 1)
        }
}
#toc {
    background: rgba(255, 255, 255, 0.3);
}    .nav-tabs-alt .nav-tabs>li[data-index="2"].active~.navs-slider-bar {
        transform: translateX(405%);
    }
    .nav-tabs-alt .nav-tabs>li[data-index="0"].active~.navs-slider-bar {
        transform: translateX(100%);
    }#aside .wrapper:hover {
	background: url(../usr/themes/handsome/assets/img/snow.gif);
	background-size: cover;
	color: #999;
}    </style>

<script src="../usr/themes/handsome/assets/libs/jquery/jquery.min.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-P2GKCC61G7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-P2GKCC61G7');
</script>




<script async src="https://cse.google.com/cse.js?cx=c8ba9e10f156f7aff"></script>


</head>
<body id="body" class="fix-padding">



<style>
.gsc-control-cse .gs-spelling, .gsc-control-cse .gs-result .gs-title, .gsc-control-cse .gs-result .gs-title *{background:white !important}
input.gsc-input {color:black !important}
</style> 
<div id="alllayout" class="app app-aside-fix container app-header-fixed "> 
<header id="header" class="app-header navbar box-shadow-bottom-lg" role="menu">

<div class="text-ellipsis navbar-header bg-black">
<button class="pull-right visible-xs" onclick="window.open('https://bit.ly/39oJwJE','_blank');">
<span class="menu-icons"><i data-feather="search"></i></span>
</button>
<button class="pull-left visible-xs" ui-toggle-class="off-screen animated" target=".app-aside" ui-scroll="app">
<span class="menu-icons"><i data-feather="menu"></i></span>
</button>

<a href="../index.html" class="navbar-brand text-lt">
<span id="navbar-brand-day">
<i class="fontello fontello-home"></i>
<span class="hidden-folded m-l-xs">It's limboPro.com</span>
</span>
</a>

</div>


<div class="collapse pos-rlt navbar-collapse bg-black">



<ul class="nav navbar-nav navbar-right">
<li class="dropdown"><a target="blank" href="https://t.me/limboprobot" class="dropdown-toggle"><i class="fontello-chat-alt icon-fw"></i><span class="visible-xs-inline">相册</span></a></li> 
<li class="dropdown">
<a href="15395.html#" data-toggle="dropdown" class="feathericons dropdown-toggle">
<i data-feather="twitch"></i>
<span class="visible-xs-inline">
闲言碎语 </span>
<span class="badge badge-sm up bg-danger pull-right-xs"></span>
</a>

<div class="dropdown-menu w-xl animated fadeInUp">
<div class="panel bg-white">
 <div class="panel-heading b-light bg-light">
<strong>
闲言碎语 </strong>
</div>
<div class="list-group" id="smallRecording">
<a href="https://limbopro.com//cross.html" class="list-group-item"><span class="clear block m-b-none">这是一条默认的说说，如果你看到这条动态，请去后台新建独立页面，地址填写cross,自定义模板选择时光机。具体说明请参见主题的使用攻略。<br><small class="text-muted">March 10th, 2022 a 01:14 am</small></span></a> </div>
</div>
</div>
</li>

</ul>
</div>

</header>


<aside id="aside" class="app-aside hidden-xs bg-black"> 
<div class="aside-wrap" layout="column">
<div class="navi-wrap scroll-y scroll-hide" flex>

<div class="clearfix hidden-xs text-center hide  show" id="aside-user">
<div class="dropdown wrapper ">
<div ui-nav>
<a href="https://t.me/s/limboprossr">
<span class="thumb-lg w-auto-folded avatar m-t-sm  ">
<img src="../usr/uploads/2019/09/2211209831.jpg" class="img-full img-circle normal-shadow">
</span>
</a>
</div>
<a href="15395.html#" data-toggle="dropdown" class="dropdown-toggle hidden-folded  ">
<span class="clear">
<span class="block m-t-sm">
<strong class="font-bold text-lt">毒奶</strong>
<b class="caret"></b>
</span>
<span class="text-muted text-xs block">
网上冲浪爱好者<br>业余斜杆青年<br>建站与防御<br>NSFW</span>
</span>
</a>

<ul class="dropdown-menu animated fadeInRight w hidden-folded no-padder">
<li class="wrapper b-b m-b-sm bg-info m-n">
<span class="arrow top hidden-folded arrow-info"></span>
<div>
<p>晚上好，注意早点休息</p>
</div>
<div class="progress progress-xs m-b-none dker">
<div class="progress-bar bg-white" data-toggle="tooltip" data-original-title="时间已经度过4.17%" style="width: 4.17%"></div>
</div>
</li>
</ul>

</div>
</div>


<nav ui-nav class="navi clearfix">
<ul class="nav">

<div class="line dk hidden-folded"></div>
<li class="hidden-folded padder m-t m-b-sm text-muted text-xs">
<span>导航</span>
</li>

<li>
<a href="../index.html" class="auto">
<span class="nav-icon"><i data-feather="home"></i></span>
<span>首页</span>
</a>
</li>

<li> <a target="_blank" href="../search.html" class="auto"><span class="nav-icon"><i class="glyphicon fontello-search"></i></span><span>毒奶搜索</span></a></li><li> <a target="_self" href="../category/tools/index.html" class="auto"><span class="nav-icon"><i class="glyphicon fontello-gear"></i></span><span>实用工具</span></a></li><li> <a target="_blank" href="../daohang/index.html" class="auto"><span class="nav-icon"><i class="glyphicon fontello-menu"></i></span><span>毒奶导航</span></a></li><li> <a target="_self" href="../allpages.html" class="auto"><span class="nav-icon"><i class="glyphicon glyphicon-book"></i></span><span>文章归档</span></a></li><li> <a target="_self" href="机场推荐.html" class="auto"><span class="nav-icon"><i class="glyphicon glyphicon-camera"></i></span><span>机场推荐</span></a></li><li> <a target="_self" href="subconverter.html" class="auto"><span class="nav-icon"><i class="glyphicon glyphicon-retweet"></i></span><span>订阅转换</span></a></li><li> <a target="_self" href="../6.html" class="auto"><span class="nav-icon"><i class="glyphicon glyphicon-volume-off"></i></span><span>联系我们</span></a></li><li> <a target="_self" href="../links.html" class="auto"><span class="nav-icon"><i class="glyphicon glyphicon-magnet"></i></span><span>友情链接</span></a></li> <li class="line dk"></li>

<li class="hidden-folded padder m-t m-b-sm text-muted text-xs">
<span>组成</span>
</li>

<li>
<a class="auto">
<span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span>

<span class="nav-icon"><i data-feather="grid"></i></span>
<span>分类</span>
</a>
<ul class="nav nav-sub dk">
<li class="nav-sub-header">
<a>
<span>分类</span>
</a>
</li>

<li class="category-level-0 category-parent"><a href="../category/ssr/index.html"><b class="badge pull-right">31</b>科学上网</a></li><li class="category-level-0 category-parent"><a class="auto" href="../category/builder/index.html"><span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span><span class="parent_name">建站优化</span></a><ul class="nav nav-sub dk child-nav"><li class="category-level-1 category-child category-level-odd"><a href="../category/LNMP/index.html"><b class="badge pull-right">36</b>建站指南</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/Typecho/index.html"><b class="badge pull-right">55</b>网站优化</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/Bulletin/index.html"><b class="badge pull-right">9</b>运营通报</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/website-protection/index.html"><b class="badge pull-right">9</b>网站防御</a></li></ul></li><li class="category-level-0 category-parent"><a class="auto" href="../category/shares/index.html"><span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span><span class="parent_name">实用分享</span></a><ul class="nav nav-sub dk child-nav"><li class="category-level-1 category-child category-level-odd"><a class="auto" href="../category/tools/index.html"><span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span><span class="parent_name">实用工具</span></a><ul class="nav nav-sub dk child-nav"><li class="category-level-2 category-child category-level-even"><a href="../category/downloader/index.html"><b class="badge pull-right">8</b>下载工具</a></li></ul></li><li class="category-level-1 category-child category-level-odd"><a href="../category/software-skills/index.html"><b class="badge pull-right">77</b>软件百科</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/Toilet-reading/index.html"><b class="badge pull-right">12</b>书单推荐</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/AfterFQ/index.html"><b class="badge pull-right">4</b>毒奶世界</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/master-care/index.html"><b class="badge pull-right">22</b>无主杂记</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/shell/index.html"><b class="badge pull-right">12</b>常用命令</a></li></ul></li><li class="category-level-0 category-parent"><a class="auto" href="../category/beautyandsex/index.html"><span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span><span class="parent_name">开车美图</span></a><ul class="nav nav-sub dk child-nav"><li class="category-level-1 category-child category-level-odd"><a href="../category/NSFW/index.html"><b class="badge pull-right">24</b>开车专栏</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/instagram/index.html"><b class="badge pull-right">24</b>美图欣赏</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/technologyart/index.html"><b class="badge pull-right">2</b>科技美学</a></li></ul></li><li class="category-level-0 category-parent"><a class="auto" href="../category/movies/index.html"><span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span><span class="parent_name">影视剧集</span></a><ul class="nav nav-sub dk child-nav"><li class="category-level-1 category-child category-level-odd"><a href="../category/hot-movies/index.html"><b class="badge pull-right">32</b>追剧小组</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/films-recommend/index.html"><b class="badge pull-right">44</b>电影推荐</a></li></ul></li><li class="category-level-0 category-parent"><a class="auto" href="../category/记录/index.html"><span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span><span class="parent_name">历史记录</span></a><ul class="nav nav-sub dk child-nav"><li class="category-level-1 category-child category-level-odd"><a href="../category/telegram-anecdote/index.html"><b class="badge pull-right">13</b>电报奇闻</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/Internetlog/index.html"><b class="badge pull-right">8</b>联网观察</a></li></ul></li>

</ul>
</li>

<li>
<a class="auto">
<span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span>
<span class="nav-icon"><i data-feather="file"></i></span>
<span>页面</span>
</a>
<ul class="nav nav-sub dk">
<li class="nav-sub-header">
<a data-no-instant>
<span>页面</span>
</a>
</li>

<li><a href="../win-win.html"><span>商务合作</span></a></li>
<li><a href="../allpages.html"><span>文章归档</span></a></li>
<li><a href="../6.html"><span>联系我们</span></a></li>
<li><a href="机场推荐.html"><span>SS机场/v2Ray机场/SSR机场推荐（2022年3月9日更新）</span></a></li>
<li><a href="../links.html"><span>友情链接</span></a></li>
</ul>
</li>

<li>
<a class="auto">
<span class="pull-right text-muted">
<i class="fontello icon-fw fontello-angle-right text"></i>
<i class="fontello icon-fw fontello-angle-down text-active"></i>
</span>
<span class="nav-icon"><i data-feather="user"></i></span>
<span>友链</span>
</a>
<ul class="nav nav-sub dk">
<li class="nav-sub-header">
<a data-no-instant>
<span>友链</span>
</a>
</li>

<li data-original-title="有朋自远方来，不亦乐乎？" data-toggle="tooltip" data-placement="top"><a rel='noopener' href="https://zhuangzhuang.cf" target="_blank"><span>ZHUANGZHUANG</span></a></li><li data-original-title="handsome 主题作者。" data-toggle="tooltip" data-placement="top"><a rel='noopener' href="https://www.ihewro.com/" target="_blank"><span>友人C</span></a></li><li data-original-title="一个不负责任的教程博客。" data-toggle="tooltip" data-placement="top"><a rel='noopener' href="https://gtary.com/" target="_blank"><span>格塔里</span></a></li><li data-original-title="Lonely Hitun" data-toggle="tooltip" data-placement="top"><a rel='noopener' href="https://blog.ihitun.com" target="_blank"><span>小忆博客</span></a></li><li data-original-title="生活不易，还请多多指教！" data-toggle="tooltip" data-placement="top"><a rel='noopener' href="https://139931.xyz" target="_blank"><span>Charsky’s Blog</span></a></li> </ul>
</li>
</ul>
</nav>

</div>


</div>
</aside>

<div id="content" class="app-content">

<div id="loading" class="butterbar active hide">
<span class="bar"></span>
</div>

<style>
    #post-content{
        font-size: 14px;
    }
</style>

<a class="off-screen-toggle hide"></a>
<main class="app-content-body ">
<div class="hbox hbox-auto-xs hbox-auto-sm">

<div class="col center-part">


<header id="small_widgets" class="bg-light lter wrapper-md">
<h1 class="entry-title m-n font-thin text-black l-h">利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP）<a class="plus-font-size" data-toggle="tooltip" data-original-title="点击改变文章字体大小"><i data-feather="type"></i></a><a class="speech-button m-l-sm superscript" data-toggle="tooltip" data-original-title="朗读文章"><i data-feather="play-circle"></i></a><a data-morphing id="morphing" data-src="#morphing-content" href="javascript:;" class="read_mode superscript m-l-sm" data-toggle="tooltip" data-placement="right" data-original-title="阅读模式"><i data-feather="book-open"></i></a></h1> 
<ul class="entry-meta text-muted list-inline m-b-none small
             post-head-icon">

<li class="meta-author"><span class="post-icons"><i data-feather="user"></i></span><span class="sr-only">博主：</span> <a class="meta-value" href="../author/1/index.html" rel="author"> 毒奶</a></li>

<li class="meta-date"><span class="post-icons"><i data-feather="clock"></i></span><span class="sr-only">发布时间：</span><time class="meta-value">2021 年 04 月 07 日</time></li>


<li class="meta-word"><span class="post-icons"><i data-feather="pen-tool"></i></span><span class="meta-value">18697字数</span></li>

<li class="meta-categories"><span class="post-icons"><i data-feather="hash"></i></span><span class="sr-only">分类：</span> <span class="meta-value"><a href="../category/shell/index.html">常用命令</a></span></li>

<li class="meta-categories"><span class="post-icons"><i data-feather="twitter"></i></span><span class="sr-only">分类：</span> <span class="meta-blue"><a href="https://twitter.com/intent/tweet?text=发现一篇好文，分享给你🎉 &raquo; 利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP） https://limbopro.com/archives/15395.html&nbsp;作者&nbsp;@limboprossr&nbsp;NGINX,Shell">点我发推</a></span></li>
<a href="https://twitter.com/intent/tweet?text=发现一篇好文，分享给你🎉 &raquo; 利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP）" data-url="https://limbopro.com/archives/15395.html&nbsp;作者&nbsp;@limboprossr" class="twitter-mention-button" data-lang="zh-cn">分享本文</a>
<a href="https://twitter.com/limboprossr?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false" data-lang="zh-cn">Follow @limboprossr</a>
<a href="https://twitter.com/intent/tweet?screen_name=limboprossr&ref_src=twsrc%5Etfw" class="twitter-mention-button" data-related="limboprossr" data-lang="zh-cn" data-show-count="false">Tweet to @limboprossr</a>
</ul>
</header>
<div class="wrapper-md" id="post-panel">
<ol class="breadcrumb bg-white-pure" itemscope=""><li>
<a href="../index.html" itemprop="breadcrumb" title="返回首页" data-toggle="tooltip"><span class="home-icons"><i data-feather="home"></i></span>首页</a>
</li><li class="active">正文&nbsp;&nbsp;</li>
<div style="float:right;">
<style>

   .breadcrumb i.iconfont.icon-qzone:after {
    padding: 0 0 0 5px;
    color: #ccc;
    content: "/\00a0";
    }
    
   </style>
</div></ol> 
<div id="postpage" class="blog-post">
<article class="single-post panel">


<div id="post-content" class="wrapper-lg">

<div class="entry-content l-h-2x" id="md_handsome_origin"><div class="tox-index"><div class="tox-title">本文目录 <span class="tox-toggle">[<a id="content-index-togglelink" href="../go/amF2YXNjcmlwdDpjb250ZW50X2luZGV4X3RvZ2dsZVRvYygp" target="_blank">隐藏</a>]</span></div><div id="toc-content"><ul><li class='toc-level2'><a href='15395.html#主理人说（提取日志/捕获&amp;提交异常IP）'>I. 主理人说（提取日志/捕获&amp;提交异常IP）</a></li><li class='toc-level2'><a href='15395.html#命令行工具介绍（awk/sort/uniq）'>II. 命令行工具介绍（awk/sort/uniq）</a></li><li class='toc-level2'><a href='15395.html#应用场景（捕获access.log日志里的异常IP）'>III. 应用场景（捕获access.log日志里的异常IP）</a></li><li class='toc-level2'><a href='15395.html#管道的概念'>IV. 管道的概念</a></li><li class='toc-level2'><a href='15395.html#标准流&amp;文件描述符'>V. 标准流&amp;文件描述符</a></li><li class='toc-level2'><a href='15395.html#标准重定向示例'>VI. 标准重定向示例</a></li></ul></li></ul></div></div>

<hr><p><img src="../usr/uploads/2021/04/2923025823.png" alt="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 找出异常IP）" /></p>
<h2 id="主理人说（提取日志/捕获&amp;提交异常IP）">I. 主理人说（提取日志/捕获&amp;提交异常IP）</h2>
<p><div class="tip inlineBlock success">利用 sort 和 uniq 以及 awk 命令分析日志，找出那些异常IP（单位时间内重复多次请求资源的IP，多次是多少次？1分钟1000次，100次等等）；本文将无缝衔接以下两篇文章；提取需要进行分析的日志（如access.log），捕获异常IP，提交异常IP至Cloudflare；赛高！</div>
<p><strong>提取access.log 一定时间段内的日志可参考下文：</strong><br />
<div class="preview">
<div class="post-inser post box-shadow-wrap-normal">
<a href="15378.html" target="_blank" class="post_inser_a no-external-link">
<div class="inner-image bg" style="background-image: url(../usr/uploads/2020/01/1957848217.jpg);background-size: cover;"></div>
<div class="inner-content">
<p class="inser-title">利用sed和date命令截取一定时间范围内的日志（如网站的访问日志 access.log）</p>
<div class="inster-summary text-muted">
主理人序 如你所知道的，日志必有时间，以及接连一串行为参数，记录你在某个时间段用什么方法，干了什么事；我们可以利用...
</div>
</div>
</a>

</div>

</div></p>
<p><strong>提交异常IP到Cloudflare</strong>：</p>
<p><div class="preview">
<div class="post-inser post box-shadow-wrap-normal">
<a href="15330.html" target="_blank" class="post_inser_a no-external-link">
<div class="inner-image bg" style="background-image: url(../usr/uploads/2019/12/2377344071.jpg);background-size: cover;"></div>
<div class="inner-content">
<p class="inser-title">Cloudflare 常用API - 批量提交恶意IP并执行相应操作（block, challenge, whitelist, js_challenge）</p>
<div class="inster-summary text-muted">
主理人序这是一个免费的，对所有用户等级开放的防火墙访问规则创建API，使用该API可自由创建IP访问规则；Clou...
</div>
</div>
</a>

</div>

</div></p>
<h2 id="命令行工具介绍（awk/sort/uniq）">II. 命令行工具介绍（awk/sort/uniq）</h2>
<p>sort、uniq、awk命令；awk 可以提取某个多行文本某一列的值，sort 可以对多行文本进行重新排序（如依照数值的大小排序；），uniq 可以对多行文本进行重复次数统计；</p>
<h3>awk 命令介绍</h3>
<p><img src="../usr/uploads/2021/04/1801028998.jpg" alt="awk.jpg" /></p>
<p>awk是一种编程语言，用于在linux/unix下对文本和数据进行处理。数据可以来自标准输入(stdin)、一个或多个文件，或其它命令的输出。它支持用户自定义函数和动态正则表达式等先进功能，是linux/unix下的一个强大编程工具。它在命令行中使用，但更多是作为脚本来使用。awk有很多内建的功能，比如数组、函数等，这是它和C语言的相同之处，灵活性是awk最大的优势。</p>
<p>之所以叫 AWK 是因为其取了三位创始人 Alfred Aho，Peter Weinberger, 和 Brian Kernighan 的 Family Name 的首字符。</p>
<p><strong>打印每一行的第二和第三个字段：</strong></p>
<pre><code>awk '{ print $2,$3 }' filename</code></pre>
<pre><code>$n 当前记录的第n个字段，比如n为1表示第一个字段，n为2表示第二个字段。 
$0 这个变量包含执行过程中当前行的文本内容。</code></pre>
<p><strong>awk运算与判断</strong></p>
<p><strong>关系运算符</strong> </p>
<table>
<thead>
<tr>
<th style="text-align: left;">运算符</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">&lt; &lt;= &gt; &gt;= != ==</td>
<td style="text-align: left;">关系运算符</td>
</tr>
</tbody>
</table>
<p>例：</p>
<pre><code>awk 'BEGIN{a=11;if(a &gt;= 9){print "ok";}}'
ok</code></pre>
<p>或等价于</p>
<pre><code>awk '{if($1&gt;'3') print $2}' filename </code></pre>
<p>即如果<strong>$1字段</strong>对应的<strong>值</strong>大于3则返回<strong>结果值</strong>等于$2对应的<strong>值</strong>；</p>
<pre><code>cat example.txt
4 99
5 101
1 3

awk '{if($1&gt;'3') print $2}' example.txt
99
101</code></pre>
<pre><code>$n 当前记录的第n个字段，比如n为1表示第一个字段，n为2表示第二个字段。 </code></pre>
<p>via <a href="../go/aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvYXdr" target="_blank">awk命令</a>；<a href="https://limbopro.com/usr/uploads/2021/04/3736196755.pdf" target="_blank">awk命令_Linux awk 命令用法详解：文本和数据进行处理的编程语言.pdf</a></p>
<h3>sort命令</h3>
<p>sort命令是在Linux里非常有用，它将文件进行排序，并将排序结果标准输出。sort命令既可以从特定的文件，也可以从stdin中获取输入。</p>
<p><strong>语法</strong></p>
<pre><code>sort(选项)(参数)</code></pre>
<p><strong>选项</strong></p>
<pre><code>-b：忽略每行前面开始出的空格字符；
-c：检查文件是否已经按照顺序排序；
-d：排序时，处理英文字母、数字及空格字符外，忽略其他的字符；
-f：排序时，将小写字母视为大写字母；
-i：排序时，除了040至176之间的ASCII字符外，忽略其他的字符；
-m：将几个排序号的文件进行合并；
-M：将前面3个字母依照月份的缩写进行排序；
-n：依照数值的大小排序；
-o&lt;输出文件&gt;：将排序后的结果存入制定的文件；
-r：以相反的顺序来排序；
-t&lt;分隔字符&gt;：指定排序时所用的栏位分隔字符；
+&lt;起始栏位&gt;-&lt;结束栏位&gt;：以指定的栏位来排序，范围由起始栏位到结束栏位的前一栏位。</code></pre>
<p><div class="tip inlineBlock info">参数即文件：<strong>指定待排序的文件列表</strong>。</div>
<pre><code>sort -n filename</code></pre>
<p>via <a href="../go/aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvc29ydA==" target="_blank">sort命令</a>；<a href="https://limbopro.com/usr/uploads/2021/04/2069018995.pdf" target="_blank">sort命令_Linux sort 命令用法详解：将文件进行排序并输出.pdf</a>；</p>
<h3>uniq命令</h3>
<p>uniq命令用于报告或忽略文件中的重复行，一般与sort命令结合使用。</p>
<p><strong>语法</strong> </p>
<pre><code>uniq(选项)(参数)</code></pre>
<p><strong>选项</strong> </p>
<pre><code>-c或——count：在每列旁边显示该行重复出现的次数；
-d或--repeated：仅显示重复出现的行列；
-f&lt;栏位&gt;或--skip-fields=&lt;栏位&gt;：忽略比较指定的栏位；
-s&lt;字符位置&gt;或--skip-chars=&lt;字符位置&gt;：忽略比较指定的字符；
-u或——unique：仅显示出一次的行列；
-w&lt;字符位置&gt;或--check-chars=&lt;字符位置&gt;：指定要比较的字符。</code></pre>
<p><strong>参数</strong><br />
输入文件：指定要去除的重复行文件。如果不指定此项，则从标准读取数据；<br />
输出文件：指定要去除重复行后的内容要写入的输出文件。如果不指定此选项，则将内容显示到标准输出设备（显示终端）。</p>
<p><strong>统计各行在文件中出现的次数：</strong></p>
<pre><code>sort file.txt | uniq -c</code></pre>
<p><div class="tip inlineBlock success">先排序，后统计；</div>
<p>via <a href="../go/aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvdW5pcQ==" target="_blank">uniq命令</a>；<a href="https://limbopro.com/usr/uploads/2021/04/4123269736.pdf" target="_blank">uniq命令_Linux uniq 命令用法详解：报告或忽略文件中的重复行.pdf</a></p>
<h2 id="应用场景（捕获access.log日志里的异常IP）">III. 应用场景（捕获access.log日志里的异常IP）</h2>
<p>假设我们已经提取出了相应日志：假设对应日志文件名为<code>1min-access.log</code>，其内容如下；</p>
<pre><code>219.25.120.201 - - [06/Apr/2021:09:20:10 +0800] "GET //feed HTTP/1.1" 200 27401 "https://limbopro.com//feed" "FreshRSS/1.18.0 (Linux; https://freshrss.org)"
23.116.47.198 - - [06/Apr/2021:09:20:13 +0800] "GET /archives/10713.html HTTP/1.1" 200 25543 "https://www.google.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
128.162.142.226 - - [06/Apr/2021:09:20:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Go-http-client/1.1"
223.242.140.34 - - [06/Apr/2021:09:20:25 +0800] "GET /archives/3629.html HTTP/1.1" 200 35789 "https://www.google.co.jp/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
252.157.251.20 - - [06/Apr/2021:09:20:27 +0800] "GET /865.html HTTP/1.1" 200 37710 "-" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
22.247.181.29 - - [06/Apr/2021:09:20:33 +0800] "GET /feed/ HTTP/1.1" 200 27402 "https://limbopro.com/" "Mozilla/5.0 (compatible; inoreader.com; 27 subscribers)"
203.116.47.198 - - [06/Apr/2021:09:20:35 +0800] "GET /btsearch.html HTTP/1.1" 200 5043 "https://limbopro.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
203.157.251.10 - - [06/Apr/2021:09:20:39 +0800] "GET /category/NSFW/ HTTP/1.1" 200 15891 "-" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
203.157.251.21 - - [06/Apr/2021:09:20:46 +0800] "HEAD / HTTP/1.1" 200 0 "-" "curl/7.68.0"
203.187.252.21 - - [06/Apr/2021:09:21:01 +0800] "GET /feed HTTP/1.1" 200 27401 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3837.0 Safari/537.36 Edg/77.0.211.2"
34.41.212.26 - - [06/Apr/2021:09:21:02 +0800] "HEAD / HTTP/1.1" 200 0 "-" "curl/7.68.0"
35.10.14.41 - - [06/Apr/2021:09:21:05 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPhone12,3; iOS 14.4.2)"
35.40.214.66 - - [06/Apr/2021:09:21:05 +0800] "GET /Adblock4limbo.conf HTTP/1.1" 200 12292 "-" "Quantumult%20X/1.0.20 (iPhone12,3; iOS 14.4.2)"
203.182.140.34 - - [06/Apr/2021:09:21:11 +0800] "GET /archives/11773.html HTTP/1.1" 200 29060 "https://limbopro.com/archives/3629.html" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
242.57.200.186 - - [06/Apr/2021:09:21:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
242.57.200.186 - - [06/Apr/2021:09:21:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
242.57.200.186 - - [06/Apr/2021:09:21:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
213.157.251.2 - - [06/Apr/2021:09:21:15 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
213.157.251.2 - - [06/Apr/2021:09:21:15 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
229.57.220.156 - - [06/Apr/2021:09:21:19 +0800] "GET /Adblock4limbo.conf HTTP/1.1" 200 12292 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
145.176.190.152 - - [06/Apr/2021:09:21:25 +0800] "GET /archives/clashA.html HTTP/1.1" 200 25177 "https://www.google.com/" "Mozilla/5.0 (Linux; Android 10; ONEPLUS A6000) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.105 Mobile Safari/537.36"
223.147.211.21 - - [06/Apr/2021:09:21:34 +0800] "GET /category/by-nc-sa.png HTTP/1.1" 404 1707 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
223.57.111.134 - - [06/Apr/2021:09:21:42 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
219.25.120.201 - - [06/Apr/2021:09:20:10 +0800] "GET //feed HTTP/1.1" 200 27401 "https://limbopro.com//feed" "FreshRSS/1.18.0 (Linux; https://freshrss.org)"
23.116.47.198 - - [06/Apr/2021:09:20:13 +0800] "GET /archives/10713.html HTTP/1.1" 200 25543 "https://www.google.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
128.162.142.226 - - [06/Apr/2021:09:20:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Go-http-client/1.1"
223.242.140.34 - - [06/Apr/2021:09:20:25 +0800] "GET /archives/3629.html HTTP/1.1" 200 35789 "https://www.google.co.jp/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
252.157.251.20 - - [06/Apr/2021:09:20:27 +0800] "GET /865.html HTTP/1.1" 200 37710 "-" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
22.247.181.29 - - [06/Apr/2021:09:20:33 +0800] "GET /feed/ HTTP/1.1" 200 27402 "https://limbopro.com/" "Mozilla/5.0 (compatible; inoreader.com; 27 subscribers)"
203.116.47.198 - - [06/Apr/2021:09:20:35 +0800] "GET /btsearch.html HTTP/1.1" 200 5043 "https://limbopro.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
203.157.251.10 - - [06/Apr/2021:09:20:39 +0800] "GET /category/NSFW/ HTTP/1.1" 200 15891 "-" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
203.157.251.21 - - [06/Apr/2021:09:20:46 +0800] "HEAD / HTTP/1.1" 200 0 "-" "curl/7.68.0"
203.187.252.21 - - [06/Apr/2021:09:21:01 +0800] "GET /feed HTTP/1.1" 200 27401 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3837.0 Safari/537.36 Edg/77.0.211.2"
34.41.212.26 - - [06/Apr/2021:09:21:02 +0800] "HEAD / HTTP/1.1" 200 0 "-" "curl/7.68.0"
35.10.14.41 - - [06/Apr/2021:09:21:05 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPhone12,3; iOS 14.4.2)"
35.40.214.66 - - [06/Apr/2021:09:21:05 +0800] "GET /Adblock4limbo.conf HTTP/1.1" 200 12292 "-" "Quantumult%20X/1.0.20 (iPhone12,3; iOS 14.4.2)"
203.182.140.34 - - [06/Apr/2021:09:21:11 +0800] "GET /archives/11773.html HTTP/1.1" 200 29060 "https://limbopro.com/archives/3629.html" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
242.57.200.186 - - [06/Apr/2021:09:21:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
213.157.251.2 - - [06/Apr/2021:09:21:15 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
229.57.220.156 - - [06/Apr/2021:09:21:19 +0800] "GET /Adblock4limbo.conf HTTP/1.1" 200 12292 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
145.176.190.152 - - [06/Apr/2021:09:21:25 +0800] "GET /archives/clashA.html HTTP/1.1" 200 25177 "https://www.google.com/" "Mozilla/5.0 (Linux; Android 10; ONEPLUS A6000) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.105 Mobile Safari/537.36"
223.147.211.21 - - [06/Apr/2021:09:21:34 +0800] "GET /category/by-nc-sa.png HTTP/1.1" 404 1707 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
223.57.111.134 - - [06/Apr/2021:09:21:42 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"</code></pre>
<p>1.现在，利用 awk 命令 取其<code>第一列值</code>，<code>awk '{print $1}'</code>；</p>
<pre><code>awk '{print $1}' 1min-access.log</code></pre>
<p>返回结果为：</p>
<pre><code>219.25.120.201
23.116.47.198
128.162.142.226
223.242.140.34
252.157.251.20
22.247.181.29
203.116.47.198
203.157.251.10
203.157.251.21
203.187.252.21
34.41.212.26
35.10.14.41
35.40.214.66
203.182.140.34
242.57.200.186
242.57.200.186
242.57.200.186
213.157.251.2
213.157.251.2
229.57.220.156
145.176.190.152
223.147.211.21
223.57.111.134
219.25.120.201
23.116.47.198
128.162.142.226
223.242.140.34
252.157.251.20
22.247.181.29
203.116.47.198
203.157.251.10
203.157.251.21
203.187.252.21
34.41.212.26
35.10.14.41
35.40.214.66
203.182.140.34
242.57.200.186
213.157.251.2
229.57.220.156
145.176.190.152
223.147.211.21
223.57.111.134</code></pre>
<p>2.下面我们 <strong>在上一个命令的基础上继续追加命令</strong>；利用 <code>sort -n</code> （依照数值的大小排序；）在得到上述结果后对结果进行排序，为什么要排序？为了下一步对重复IP进行统计；</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n</code></pre>
<p>得到结果如下，是否重复一目了然：</p>
<pre><code>22.247.181.29
22.247.181.29
23.116.47.198
23.116.47.198
34.41.212.26
34.41.212.26
35.10.14.41
35.10.14.41
35.40.214.66
35.40.214.66
128.162.142.226
128.162.142.226
145.176.190.152
145.176.190.152
203.116.47.198
203.116.47.198
203.157.251.10
203.157.251.10
203.157.251.21
203.157.251.21
203.182.140.34
203.182.140.34
203.187.252.21
203.187.252.21
213.157.251.2
213.157.251.2
213.157.251.2
219.25.120.201
219.25.120.201
223.147.211.21
223.147.211.21
223.242.140.34
223.242.140.34
223.57.111.134
223.57.111.134
229.57.220.156
229.57.220.156
242.57.200.186
242.57.200.186
242.57.200.186
242.57.200.186
252.157.251.20
252.157.251.20</code></pre>
<p>3.在上一个命令的基础上追加命令，利用 <code>uniq -c</code> 命令<strong>统计上述结果中的各个IP重复的次数</strong>；</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n | uniq -c</code></pre>
<p>得到结果如下，某某IP重复次数是多少一目了然：</p>
<pre><code>2 22.247.181.29
2 23.116.47.198
2 34.41.212.26
2 35.10.14.41
2 35.40.214.66
2 128.162.142.226
2 145.176.190.152
2 203.116.47.198
2 203.157.251.10
2 203.157.251.21
2 203.182.140.34
2 203.187.252.21
3 213.157.251.2
2 219.25.120.201
2 223.147.211.21
2 223.242.140.34
2 223.57.111.134
2 229.57.220.156
4 242.57.200.186
2 252.157.251.20</code></pre>
<p>4.在上一个命令的基础上追加命令，利用 awk 配合 if 命令判断 以取得满足条件的结果；<code>awk '{if($1&gt;='$Maxrequest') print $2}'</code>，其中 <code>$Maxrequest</code> 是变量，可以是任意正整数（如3），取出重复次数大于等于3的IP，其中<code>$1</code>代表取第一列值，假设第一列值满足条件如大于等于3则返回对应第二列值；</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n | uniq -c | awk '{if($1&gt;='3') print $2}'</code></pre>
<p>得到结果如下：</p>
<pre><code>213.157.251.2
242.57.200.186</code></pre>
<p>Get?</p>
<p>现在，你应该是想<strong>把这些异常IP存储到一个小文本</strong>，例如<code>badip.txt</code>；</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n | uniq -c | awk '{if($1&gt;='$Maxrequest') print $2}' &gt; badip.txt</code></pre>
<p><div class="tip inlineBlock info">文本文件存储的位置可根据需要自行拟定；关于<strong>终端命令的结果输出/输入的使用方法可参考</strong>：<a href="../go/aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1zaGVsbC1pby1yZWRpcmVjdGlvbnMuaHRtbA==" target="_blank">Shell 输入/输出重定向</a>；<a href="https://limbopro.com/usr/uploads/2021/04/2689236751.pdf" target="_blank">Shell 输入_输出重定向.pdf</a>；</div>
<p><div class="tip inlineBlock info">其中 $Maxrequest 可取任意正整数值，具体就要看各位了，一分钟刷新几次页面算是正常，我觉得大于60次就有点不正常了；具体情况具体分析，这就涉及到额外的策略选择了；</div>
<p><div class="tip inlineBlock share">具体日志及文本路径请根据实际情况填写；</div>
<h2 id="管道的概念">IV. 管道的概念</h2>
<p>管道 <code>|</code>，将前一个命令的输出作为标准输入传给后面的命令，不会用到任何中间文件与缓冲区。</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n</code></pre>
<p>管道<code>|</code> 即将 <code>awk '{print $1}' 1min-access.log</code> 的结果输出作为标准输入传给后面的命令<code>sort -n</code>，Get 到了吗？；</p>
<h2 id="标准流&amp;文件描述符">V. 标准流&amp;文件描述符</h2>
<p><div class="tip inlineBlock info">在《c程序设计语言》中，有这么一句话：当命令解释程序（即shell）运行一个程序的时候，它将打开三个文件，对应当<strong><a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JTk2JTg3JUU0JUJCJUI2JUU2JThGJThGJUU4JUJGJUIwJUU3JUFDJUE2" target="_blank">文件描述符</a></strong>分别为0，1，2，依次表示标准输入、标准输出、标准错误（标准流）。</div>
<h4>标准输入 (stdin)</h4>
<pre><code>$ awk '{print $1}' 1min-access.log</code></pre>
<p><strong>白话文解释</strong>：你在终端输入的上述命令，即为标准输入；</p>
<p>标准输入是指输入至程式的资料（通常是文件）。程式要求以<em>读</em>(read)操作来传输资料。并非所有程式都要求输入。如<em>dir</em>或<em>ls</em>程式（显示一个目录中的档名）运行时不用任何输入。</p>
<p>除非<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3cvaW5kZXgucGhwP3RpdGxlPemHjeWwjuWQkSZhY3Rpb249ZWRpdCZyZWRsaW5rPTE=" target="_blank">重定向</a>，输入是预期由 <a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv6Y2155uk" target="_blank">键盘</a>取得的。</p>
<h4>标准输出 (stdout)</h4>
<p><strong>白话文解释</strong>：你所执行的每一项shell命令，终端都会有相应执行结果被打印出来，这就是所谓的标准输出；</p>
<pre><code>$ awk '{print $1}' 1min-access.log
219.25.120.201
23.116.47.198
128.162.142.226
223.242.140.34
252.157.251.20
22.247.181.29</code></pre>
<p>标准输出是指程式写输出资料的串流。程式要求资料传输使用写的运算。并非所有程式都要求输出。如mv或ren程式在成功完成时是沉默的。</p>
<p>除非重定向，输出为 终端。</p>
<h4>标准错误输出 (stderr)</h4>
<p>标准错误输出是另一输出串流，用于输出错误讯息或诊断。它独立于标准输出，且可以分别被重导。常见的目的则为启始这个程式的终端，即使其标准输出被重导亦如此。例如：一个管线中的程式的输出被重导到下一个程式，但错误讯息仍然直接流向文字终端机。</p>
<p>把标准输出和标准错误输出导到相同的目的地，如文字终端，是可以（且正常）的。讯息会以如同程式写入的顺序来出现，除非使用了缓冲。（例如，一个常见状况是，当标准错误串流未使用缓冲，但标准输出串流使用了缓冲；在这种情况下，如果标准输出的缓冲区还没满的话，较迟写到标准错误的文字可能会较早出现在终端。</p>
<h4>标准输出重定向</h4>
<pre><code>awk '{print $1}' 1min-access.log | sort -n | uniq -c | awk '{if($1&gt;='$Maxrequest') print $2}' &gt; badip.txt</code></pre>
<p><strong>输出重定向(stdout redirection)</strong>，将本来应该终端打印出来的输出结果存储到了指定文件的动作即为输出重定向，此时我们是在终端看不到输出结果的；</p>
<p>大多数 UNIX 系统命令从你的终端接受输入并将所产生的输出发送回​​到您的终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p>
<p><a href="https://limbopro.com/usr/uploads/2021/04/3686232488.pdf" target="_blank" target="_blank">Shell 输入_输出重定向.pdf</a>；<a href="../go/aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1zaGVsbC1pby1yZWRpcmVjdGlvbnMuaHRtbA==" target="_blank">Shell 输入/输出重定向</a>；</p>
<p>via <a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JUE4JTk5JUU2JUJBJTk2JUU0JUI4JUIyJUU2JUI1JTgx" target="_blank">标准流</a>；</p>
<h3>文件描述符</h3>
<p>文件描述符在形式上是一个非负整数。实际上，它是一个索引值，指向<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv5YaF5qC4" target="_blank">内核</a>为每一个<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv6L+b56iL" target="_blank">进程</a>所维护的该进程打开文件的记录表。当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符。在<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv56iL5bqP6K6+6K6h" target="_blank">程序设计</a>中，一些涉及底层的程序编写往往会围绕着文件描述符展开。但是文件描述符这一概念往往只适用于<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvVU5JWA==" target="_blank">UNIX</a>、<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvTGludXg=" target="_blank">Linux</a>这样的操作系统。</p>
<p>每个Unix进程（除了可能的<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv5a6I5oqk6L+b56iL" target="_blank">守护进程</a>）应均有三个标准的<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvUE9TSVg=" target="_blank">POSIX</a>文件描述符，对应于三个标准流：</p>
<table>
<thead>
<tr>
<th style="text-align: center;">整数值</th>
<th style="text-align: center;">名称</th>
<th style="text-align: center;">&lt;<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvVW5pc3RkLmg=" target="_blank">unistd.h</a>&gt;符号常量<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMv5paH5Lu25o+P6L+w56ymI2NpdGVfbm90ZS0x" target="_blank">[1]</a></th>
<th style="text-align: center;">&lt;<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvU3RkaW8uaA==" target="_blank">stdio.h</a>&gt;文件流<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMv5paH5Lu25o+P6L+w56ymI2NpdGVfbm90ZS0y" target="_blank">[2]</a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvU3RkaW4=" target="_blank">Standard input</a></td>
<td style="text-align: center;">STDIN_FILENO</td>
<td style="text-align: center;">stdin</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvU3Rkb3V0" target="_blank">Standard output</a></td>
<td style="text-align: center;">STDOUT_FILENO</td>
<td style="text-align: center;">stdout</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvU3RkZXJy" target="_blank">Standard error</a></td>
<td style="text-align: center;">STDERR_FILENO</td>
<td style="text-align: center;">stderr</td>
</tr>
</tbody>
</table>
<p>via <a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JTk2JTg3JUU0JUJCJUI2JUU2JThGJThGJUU4JUJGJUIwJUU3JUFDJUE2IyVFNiU5NiU4NyVFNCVCQiVCNiVFNiU4RiU4RiVFOCVCRiVCMCVFNyVBQyVBNiVFNyU5QSU4NCVFNyU5NCU5RiVFNiU4OCU5MA==" target="_blank">文件描述符</a>；</p>
<p>STDIN是标准输入，默认从键盘读取信息；<br />
STDOUT是标准输出，默认将输出结果输出至终端；<br />
STDERR是标准错误，默认将输出结果输出至终端。</p>
<p>参阅：<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JUE4JTk5JUU2JUJBJTk2JUU0JUI4JUIyJUU2JUI1JTgx" target="_blank">标准流</a>；</p>
<h2 id="标准重定向示例">VI. 标准重定向示例</h2>
<p>大多数 UNIX 系统命令从你的终端接受输入并将所产生的输出发送回​​到您的终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p>
<p>重定向命令列表如下：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">命令</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">command &gt; file</td>
<td style="text-align: left;">将输出重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">command &lt; file</td>
<td style="text-align: left;">将输入重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">command &gt;&gt; file</td>
<td style="text-align: left;">将输出以追加的方式重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">n &gt; file</td>
<td style="text-align: left;">将文件描述符为 n 的文件重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">n &gt;&gt; file</td>
<td style="text-align: left;">将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">n &gt;&amp; m</td>
<td style="text-align: left;">将输出文件 m 和 n 合并。</td>
</tr>
<tr>
<td style="text-align: left;">n &lt;&amp; m</td>
<td style="text-align: left;">将输入文件 m 和 n 合并。</td>
</tr>
<tr>
<td style="text-align: left;">&lt;&lt; tag</td>
<td style="text-align: left;">将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
</tr>
</tbody>
</table>
<p>command 代表要执行的指令、命令；如：</p>
<pre><code>$ awk '{print $1}' 1min-access.log</code></pre>
<p>示例：</p>
<pre><code>$ awk '{print $1}' 1min-access.log &gt; ip-list.txt</code></pre>
<p>将得到的IP重定向输出到文本文件 <code>ip-list.txt</code>；</p>
<p>更多姿势参阅：<a href="https://limbopro.com/usr/uploads/2021/04/3686232488.pdf" target="_blank" target="_blank">Shell 输入_输出重定向.pdf</a>；<a href="../go/aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1zaGVsbC1pby1yZWRpcmVjdGlvbnMuaHRtbA==" target="_blank">Shell 输入/输出重定向</a>；</p><hr class="content-copyright" style="margin-top:50px" /><blockquote class="content-copyright" style="font-style:normal"><p class="content-copyright">版权属于：毒奶 <br><p class="content-copyright">联系我们：<a class="content-copyright" href="../6.html" target="_blank" target="_blank">https://limbopro.com/6.html</a><br>毒奶搜索：<a class="content-copyright" href="../search.html" target="_blank" target="_blank">https://limbopro.com/search.html</a> <br>毒奶导航：<a class="content-copyright" href="../daohang/index.html" target="_blank" target="_blank">https://limbopro.com/daohang/index.html</a> </p></p><p class="content-copyright">本文链接：<a class="content-copyright" href="15395.html" target="_blank">https://limbopro.com/archives/15395.html</a></p><p class="content-copyright"><p class="content-copyright"><a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh-Hans" target="_blank" target="_blank" target="_blank"><img alt="知识共享许可协议" style="border-width:0" src="../by-nc-sa.png"></a><br>本文采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh-Hans" target="_blank" target="_blank" target="_blank">CC BY-NC-SA 4.0 许可协议</a>，转载或引用本文时请遵守许可协议，注明出处、不得用于商业用途！</p></blockquote></div>

<div class="show-foot"><div class="notebook">
<i class="fontello fontello-clock-o"></i>
<span>最后修改：2021 年 06 月 12 日 12 : 12 AM</span>
</div><div class="copyright" data-toggle="tooltip" data-html="true" data-original-title="转载请保留本文转载地址，著作权归作者所有"><span>© 允许规范转载</span>
</div>
</div>

</div>
</article>
</div>

<nav class="m-t-lg m-b-lg">
<ul class="pager">
<li class="next"> <a class="box-shadow-wrap-normal" href="15378.html" title="利用sed和date命令截取一定时间范围内的日志（如网站的访问日志 access.log）" data-toggle="tooltip">
下一篇 </a></li>
<a href="https://twitter.com/intent/tweet?text=发现一篇好文，分享给你🎉  &raquo; 利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP）" data-url="https://limbopro.com/archives/15395.html&nbsp;作者&nbsp;@limboprossr" class="twitter-mention-button" data-lang="zh-cn" data-size="large">分享本文</a>
<li class="previous"> <a class="box-shadow-wrap-normal" href="15507.html" title="通过修改浏览器 User-Agent 以访问毒奶博客隐藏页面的方法" data-toggle="tooltip"> 上一篇 </a></li>
</ul>
</nav>


<div id="sidebar">
<section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
<h5 class="widget-title m-t-none text-md">文章标签</h5>
<div class="post-tags tags l-h-2x">
<a href="../tag/NGINX/index.html">NGINX</a> <a href="../tag/Shell/index.html">Shell</a></div>
</section>
</div>

<div> <a target="_blank" href="12904.html"><img src="../usr/uploads/2021/03/3476932119.png" style="width: auto;"></a> </div>
<div> <a target="_blank" href="adguard.html"><img src="../usr/uploads/2021/03/2420019737.png" style="width: auto;"></a> </div>


<div> <a target="_blank" href="../win-win.html"><img src="../usr/uploads/2021/01/830145139.png" style="width: auto;"></a> </div>
<a target="_blank" href="../search.html"><img src="../usr/uploads/2021/12/2084042701.png" alt="点击进入毒奶搜索，搜万物。" /></a>

<div class="gcse-search"></div>
<p></p>
<style type="text/css"> 
blockquote{
background-color: #000000;
border-left: 0px solid #000000;
color:#999999;
}
</style>
<p></p>
<br>
<h5 class="widget-title m-t-none text-md">相关文章推荐</h5>
<p></p>
<li class="list-group-item"><a href="Crontab.html" title="Linux必知必会- Crontab 定时执行（如脚本）">Linux必知必会- Crontab 定时执行（如脚本）</a></li>
<li class="list-group-item"><a href="16738.html" title="登出一台陌生的服务器前应该做什么？清除用户登录记录和命令历史。">登出一台陌生的服务器前应该做什么？清除用户登录记录和命令历史。</a></li>
<li class="list-group-item"><a href="15529.html" title="GEOIP2 在 NGINX 上的应用（根据IP归属国家自动切换网站根目录&amp;静态资源限速&amp;禁止访问）">GEOIP2 在 NGINX 上的应用（根据IP归属国家自动切换网站根目录&amp;静态资源限速&amp;禁止访问）</a></li>
<li class="list-group-item"><a href="15531.html" title="GEOIP2（GeoLite2免费地理位置数据）数据库下载与自动更新">GEOIP2（GeoLite2免费地理位置数据）数据库下载与自动更新</a></li>
<li class="list-group-item"><a href="15507.html" title="通过修改浏览器 User-Agent 以访问毒奶博客隐藏页面的方法">通过修改浏览器 User-Agent 以访问毒奶博客隐藏页面的方法</a></li>
<p></p>
<br>
<h5 class="widget-title m-t-none text-md">最新文章推荐</h5>
<p></p>
<li class="list-group-item"><a href="20791.html">Chrome/Edge/Firefox浏览器扩展 - Dualsub（通用字幕渲染器/机器翻译） ，实现 YouTube 其他语言/中文 双字幕显示！</a></li>
<li class="list-group-item"><a href="block-contentfarm-Quantumultx.html">利用 Quantumult X 和 JavaScript 屏蔽「内容农场/CSDN/KKnews」及谷歌搜索广告，让谷歌搜索更清爽实用。</a></li>
<li class="list-group-item"><a href="Falling-snowflakes.html">Typecho优化 - 为网站配置下雪效果，圣诞雪花动态特效 JS 分享</a></li>
<p></p>
<br>
<div id="disqus_thread"></div>
<script>

/**
 * *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 * *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
 * var disqus_config = function () {
 * this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
 * this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
 * };
 * */
 

function loadDisqus() {
  // Disqus via Sukka's Blog
  var d = document, s = d.createElement('script');
  s.src = 'https://limbopro-xyz.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  window.disqus_config = function () {
  this.page.url = limbopro.com;
  
  };
  // 如果你和我一样在用 DisqusJS，loadDisqus() 里就应该是 DisqusJS 的初始化代码 new DisqusJS({...})
}

// 通过检查 window 对象确认是否在浏览器中运行
var runningOnBrowser = typeof window !== "undefined";
// 通过检查 scroll 事件 API 和 User-Agent 来匹配爬虫
var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
// 检查当前浏览器是否支持 IntersectionObserver API
var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;

// 一个小 hack，将耗时任务包裹在 setTimeout(() => { }, 1) 中，可以推迟到 Event Loop 的任务队列中、等待主调用栈清空后才执行，在绝大部分浏览器中都有效
// 其实这个 hack 本来是用于优化骨架屏显示的。一些浏览器总是等 JavaScript 执行完了才开始页面渲染，导致骨架屏起不到降低 FCP 的优化效果，所以通过 hack 将耗时函数放到骨架屏渲染完成后再进行。
setTimeout(function () {
  if (!isBot && supportsIntersectionObserver) {
    // 当前环境不是爬虫、并且浏览器兼容 IntersectionObserver API
    var disqus_observer = new IntersectionObserver(function(entries) {
      // 当前视窗中已出现 Disqus 评论框所在位置
      if (entries[0].isIntersecting) {
        // 加载 Disqus
        loadDisqus();
        // 停止当前的 Observer
        disqus_observer.disconnect();
      }
    }, { threshold: [0] });
    // 设置让 Observer 观察 #disqus_thread 元素
    disqus_observer.observe(document.getElementById('disqus_thread'));
  } else {
    // 当前环境是爬虫、或当前浏览器其不兼容 IntersectionObserver API
    // 直接加载 Disqus
    loadDisqus();
  }
}, 1);

</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div>
</div>

<aside class="asideBar col w-md bg-white-only bg-auto no-border-xs" role="complementary">
<div id="sidebar">
<section id="tabs-4" class="widget widget_tabs clear">
<div class="nav-tabs-alt no-js-hide">
<ul class="nav nav-tabs nav-justified box-shadow-bottom-normal tablist" role="tablist">
<li data-index="0" class="active" role="presentation"> <a href="15395.html#widget-tabs-4-hots" role="tab" aria-controls="widget-tabs-4-hots" aria-expanded="true" data-toggle="tab"><div class="sidebar-icon wrapper-sm"><i data-feather="thumbs-up"></i></div><span class="sr-only">热门文章</span> </a></li>
</ul>
</div>
<div class="tab-content">

<section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
<h5 class="widget-title m-t-none text-md">热门分类</h5>
<li class="list-group-item text-second"><span class="nav-icon"><i data-feather="battery-charging"></i></span>
<span class="badge pull-right" style="color:white"><a target="_self" href="../category/Typecho/index.html">
39</a></span>
<a target="_self" href="../category/Typecho/index.html">建站指南</a></li>
<li class="list-group-item text-second"><span class="nav-icon"><i data-feather="triangle"></i></span>
<span class="badge pull-right" style="color:white"><a target="_self" href="../tag/Cloudflare/index.html">
8</a></span>
<a target="_self" href="../tag/Cloudflare/index.html">网站防御</a></li>
<li class="list-group-item text-second"><span class="nav-icon"><i data-feather="tool"></i></span>
<span class="badge pull-right" style="color:white"><a target="_self" href="../category/tools/index.html">
60</a></span>
<a target="_self" href="../category/tools/index.html">实用工具</a></li>
<li class="list-group-item text-second"><span class="nav-icon"><i data-feather="box"></i></span>
<span class="badge pull-right" style="color:white"><a target="_self" href="../category/software-skills/index.html">
77</a></span>
<a target="_self" href="../category/software-skills/index.html">软件百科</a></li>
<li class="list-group-item text-second"><span class="nav-icon"><i data-feather="hash"></i></span>
<span class="badge pull-right" style="color:white"><a target="_self" href="../category/shell/index.html">
12</a></span>
<a target="_self" href="../category/shell/index.html">常用命令</a></li>
<li class="list-group-item text-second"><span class="nav-icon"><i data-feather="film"></i></span>
<span class="badge pull-right" style="color:white"><a target="_self" href="../category/movies/index.html">
44</a></span>
<a target="_self" href="../category/movies/index.html">影视剧集</a></li>
<li class="list-group-item text-second"><span class="nav-icon"><i data-feather="instagram"></i></span>
<span class="badge pull-right" style="color:white"><a target="_self" href="../category/instagram/index.html">
39</a></span>
<a target="_self" href="../category/instagram/index.html">美图欣赏</a></li>
<li class="list-group-item text-second"><span class="nav-icon"><i data-feather="navigation-2"></i></span>
<span class="badge pull-right" style="color:white"><a target="_self" href="../category/ssr/index.html">
35</a></span>
<a target="_self" href="../category/ssr/index.html">科学上网</a></li>
</section>

<section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
<h5 class="widget-title m-t-none text-md">热门文章推荐</h5>
<li class="list-group-item">
<a href="3629.html" class="pull-left thumb-sm m-r"><img src="../usr/themes/handsome/assets/img/sj2/7.jpg" class="img-40px normal-shadow img-square"></a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="3629.html" title="iOS 使用 Surge/Quantumult/Shadowrocket /QuantumultX 解锁 TikTok （国际版）区域限制（免拔卡）持续更新"> iOS 使用 Surge/Quantumult/Shadowrocket /QuantumultX 解锁 TikTok （国际版）区域限制（免拔卡）持续更新 </a></h4>
</div></li><li class="list-group-item">
<a href="2561.html" class="pull-left thumb-sm m-r"><img src="../usr/themes/handsome/assets/img/sj2/1.jpg" class="img-40px normal-shadow img-square"></a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="2561.html" title="Rules / 分流/去广告规则：Surge / Shadowrocket / Quantumult/ Quantumult X  及详细配置步骤教程（萌新小白版本）"> Rules / 分流/去广告规则：Surge / Shadowrocket / Quantumult/ Quantumult X 及详细配置步骤教程（萌新小白版本） </a></h4>
</div></li><li class="list-group-item">
<a href="subconverter.html" class="pull-left thumb-sm m-r"><img src="../usr/themes/handsome/assets/img/sj2/6.jpg" class="img-40px normal-shadow img-square"></a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="subconverter.html" title="订阅转换 - API - 让你的Clash(A/W/X) ，Surge重新焕发生机"> 订阅转换 - API - 让你的Clash(A/W/X) ，Surge重新焕发生机 </a></h4>
</div></li><li class="list-group-item">
<a href="3846.html" class="pull-left thumb-sm m-r"><img src="../usr/themes/handsome/assets/img/sj2/5.jpg" class="img-40px normal-shadow img-square"></a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="3846.html" title="QuantumultX 使用教程：策略组&amp;分流规则&amp;自定义图标&amp;过滤节点的进阶玩法"> QuantumultX 使用教程：策略组&amp;分流规则&amp;自定义图标&amp;过滤节点的进阶玩法 </a></h4>
</div></li><li class="list-group-item">
<a href="nicegram.html" class="pull-left thumb-sm m-r"><img src="../usr/themes/handsome/assets/img/sj2/3.jpg" class="img-40px normal-shadow img-square"></a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="nicegram.html" title="解除电报敏感內容限制教程 - Telegram（电报）"> 解除电报敏感內容限制教程 - Telegram（电报） </a></h4>
</div></li>
</section>

<section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
<h5 class="widget-title m-t-none text-md">随机文章推荐</h5>
<li class="list-group-item">
<a href="2487.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="2487.html" title="10个优秀的资讯、科普、涨姿势网站推荐"> 10个优秀的资讯、科普、涨姿势网站推荐 </a></h4>
</div></li><li class="list-group-item">
<a href="15342.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="15342.html" title="Cloudflare CDN - 获取访问用户真实IP（而不是CDN节点IP）"> Cloudflare CDN - 获取访问用户真实IP（而不是CDN节点IP） </a></h4>
</div></li><li class="list-group-item">
<a href="block-contentfarm-Quantumultx.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="block-contentfarm-Quantumultx.html" title="利用 Quantumult X 和 JavaScript 屏蔽「内容农场/CSDN/KKnews」及谷歌搜索广告，让谷歌搜索更清爽实用。"> 利用 Quantumult X 和 JavaScript 屏蔽「内容农场/CSDN/KKnews」及谷歌搜索广告，让谷歌搜索更清爽实用。 </a></h4>
</div></li><li class="list-group-item">
<a href="1215.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="1215.html" title="Telegram群组/频道/机器人推荐（电报开车H群/软件合租/技术群/科学上网）"> Telegram群组/频道/机器人推荐（电报开车H群/软件合租/技术群/科学上网） </a></h4>
</div></li><li class="list-group-item">
<a href="3261.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="3261.html" title="安娜 Anna (2019)"> 安娜 Anna (2019) </a></h4>
</div></li><li class="list-group-item">
<a href="445.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="445.html" title="切尔诺贝利  Chernobyl"> 切尔诺贝利 Chernobyl </a></h4>
</div></li> </section>


<div id="widget-tabs-4-random" class="tab-pane fade wrapper-md no-js-show" role="tabpanel">
<h5 class="widget-title m-t-none text-md">随机文章</h5>
<ul class="list-group no-bg no-borders pull-in">
<li class="list-group-item">
<a href="1267.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="1267.html" title="我为什么选择Typecho？"> 我为什么选择Typecho？ </a></h4>
</div></li><li class="list-group-item">
<a href="2144.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="2144.html" title="安娜贝尔3：回家 Annabelle Comes Home (2019)丨本周电影推荐"> 安娜贝尔3：回家 Annabelle Comes Home (2019)丨本周电影推荐 </a></h4>
</div></li><li class="list-group-item">
<a href="315.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="315.html" title="站酷画家丨沁风"> 站酷画家丨沁风 </a></h4>
</div></li><li class="list-group-item">
<a href="1186.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="1186.html" title="NSFW - 04期丨YUZUKI 写真集"> NSFW - 04期丨YUZUKI 写真集 </a></h4>
</div></li><li class="list-group-item">
<a href="3917.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="3917.html" title="只需三步，即可通过使用 QuantumultX 或 Quantumult 抓包"> 只需三步，即可通过使用 QuantumultX 或 Quantumult 抓包 </a></h4>
</div></li><li class="list-group-item">
<a href="19166.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="19166.html" title="Linux - 使用 grep&amp;sed命令批量寻找符合标准的文件并替换其中指定字符串"> Linux - 使用 grep&amp;sed命令批量寻找符合标准的文件并替换其中指定字符串 </a></h4>
</div></li> </ul>
</div>
</div>
</section>

<section id="blog_info" class="widget widget_categories wrapper-md clear">
<h5 class="widget-title m-t-none text-md">博客信息</h5>
<ul class="list-group box-shadow-wrap-normal">
<li class="list-group-item"><span class="blog-info-icons"> <i data-feather="award"></i></span> <span class="badge
           pull-right">393</span>文章数目</li>

<li class="list-group-item"><span class="blog-info-icons"> <i data-feather="calendar"></i></span>
<span class="badge
           pull-right">2年305天</span>建站已有</li>
<li class="list-group-item"><span class="blog-info-icons"> <i data-feather="clock"></i></span>
<span class="badge
           pull-right">3407天</span>关站倒计时</li>
<li class="list-group-item"><span class="blog-info-icons"> <i data-feather="activity"></i></span> <span class="badge
           pull-right">2 星期前</span>最后活动</li>
<li class="list-group-item"><span class="blog-info-icons"> <i data-feather="cpu"></i></span> <span class="badge
           pull-right">155 ms</span>TTFB</li>

</ul>
</section>

<section id="blog_info" class="widget widget_categories wrapper-md clear">
<h5 class="widget-title m-t-none text-md">其他平台</h5>
<ul class="list-group box-shadow-wrap-normal">
<li class="list-group-item text-second"><span class="blog-info-icons"> <i data-feather="send"></i></span>
<span class="badge pull-right" style="color:white"><a target="_blank" href="https://bit.ly/2xrozAl">limbopro</a></span><a target="_blank" href="https://t.me/limboprossr">Telegram</a></li>
<li class="list-group-item text-second"><span class="blog-info-icons"> <i data-feather="github"></i></span>
<span class="badge pull-right" style="color:white"><a target="_blank" href="https://bit.ly/3iCP0GL">毒奶博主</a></span><a target="_blank" href="https://github.com/limbopro">Github</a></li>
<li class="list-group-item text-second"><span class="blog-info-icons"> <i data-feather="twitter"></i></span>
<span class="badge pull-right" style="color:white"><a target="_blank" href="https://bit.ly/3sFWu0d">毒奶博主</a></span><a target="_blank" href="https://twitter.com/limboprossr">Twitter</a></li>
<li class="list-group-item text-second"><span class="blog-info-icons"> <i data-feather="instagram"></i></span>
<span class="badge pull-right" style="color:white"><a target="_blank" href="https://bit.ly/3bYHXXQ">毒奶博主</a></span><a target="_blank" href="https://www.instagram.com/limboprossr/">Instagram</a></li>
<li class="list-group-item text-second"><span class="blog-info-icons"> <i data-feather="youtube"></i></span>
<span class="badge pull-right" style="color:white"><a target="_blank" href="https://bit.ly/2VJcz7o">毒奶博主</a></span><a target="_blank" href="https://www.youtube.com/channel/UCopiQ6DaRujU9iV9g-zrrMQ">Youtube</a></li>
</ul>
</section>

<section id="a_d_sidebar" class="widget widget_categories wrapper-md clear">
<h5 class="widget-title m-t-none text-md">广告</h5>

<a href='机场推荐.html'><img src='../usr/uploads/2021/10/2616779961.png' alt='CatNet is Ready 4 you' title='CatNet is Ready 4 you' border='0' /></a>

<br></br>
<a class="twitter-timeline" data-height="480" data-dnt="true" data-theme="dark" href="https://twitter.com/limboprossr?ref_src=twsrc%5Etfw">Tweets by limboprossr</a>
<br></br>
<a href="https://twitter.com/limboprossr?ref_src=twsrc%5Etfw" class="twitter-follow-button" target="_blank" data-show-count="false">Follow @limboprossr</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<br><br>
<script>
    function displayTime() {
        document.getElementById("time").innerHTML = new Date().toTimeString();
    } 
    setInterval(displayTime,1000);      // 每隔1秒钟调用displayTime函数
</script> </section>


<section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
<h5 class="widget-title m-t-none text-md">标签云</h5>
<div class="post-tags tags l-h-2x">
<a href="../tag/NGINX/index.html">NGINX</a> <a href="../tag/Shell/index.html">Shell</a> </div>
</section>

<section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
<h5 class="widget-title m-t-none text-md">更多文章推荐</h5>
<li class="list-group-item">
<a href="7599.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="7599.html" title="iOS 以图搜图捷径推荐（聚合版）丨毒奶捷径推荐清单"> iOS 以图搜图捷径推荐（聚合版）丨毒奶捷径推荐清单 </a></h4>
</div></li><li class="list-group-item">
<a href="torproject.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="torproject.html" title="使用 Tor 匿名上网"> 使用 Tor 匿名上网 </a></h4>
</div></li><li class="list-group-item">
<a href="670.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="670.html" title="2001太空漫游丨本周电影推荐"> 2001太空漫游丨本周电影推荐 </a></h4>
</div></li><li class="list-group-item">
<a href="Post-truth.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="Post-truth.html" title="后真相时代 - 事实已经变得不重要，重要的是人们对此所产生的情绪。"> 后真相时代 - 事实已经变得不重要，重要的是人们对此所产生的情绪。 </a></h4>
</div></li><li class="list-group-item">
<a href="2713.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="2713.html" title="Linux常用命令 - Linux 软件包卸载，无用依赖、系统日志、硬盘大文件清理（运维）"> Linux常用命令 - Linux 软件包卸载，无用依赖、系统日志、硬盘大文件清理（运维） </a></h4>
</div></li><li class="list-group-item">
<a href="2456.html" < a>
<div class="clear">
<h4 class="h5 l-h text-second"> <a href="2456.html" title="蝙蝠侠黑暗骑士三部曲：侠隐之谜&amp;黑暗骑士&amp;黑暗骑士崛起（小丑电影相关）"> 蝙蝠侠黑暗骑士三部曲：侠隐之谜&amp;黑暗骑士&amp;黑暗骑士崛起（小丑电影相关） </a></h4>
</div></li></section>


<section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
<h5 class="widget-title m-t-none text-md">北京时间</h5>
<div class="post-tags tags l-h-2x">

<p id="time"></p>
</div>
</section>

</div>
</aside>

</div>
</main>
<div id="morphing-content" class="hidden read_mode_article">
<div class="page">
<h1 class="title">利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 捕获异常IP）</h1>
<div class="metadata singleline"><a href="15395.html#" rel="author" class="byline">毒奶</a>&nbsp;•&nbsp;<span class="delimiter"></span><time class="date">2021 年 04 月 07 日</time></div>
<div id="morphing-content-real_origin"><div class="tox-index"><div class="tox-title">本文目录 <span class="tox-toggle">[<a id="content-index-togglelink" href="../go/amF2YXNjcmlwdDpjb250ZW50X2luZGV4X3RvZ2dsZVRvYygp" target="_blank">隐藏</a>]</span></div><div id="toc-content"><ul><li class='toc-level2'><a href='15395.html#主理人说（提取日志/捕获&amp;提交异常IP）'>I. 主理人说（提取日志/捕获&amp;提交异常IP）</a></li><li class='toc-level2'><a href='15395.html#命令行工具介绍（awk/sort/uniq）'>II. 命令行工具介绍（awk/sort/uniq）</a></li><li class='toc-level2'><a href='15395.html#应用场景（捕获access.log日志里的异常IP）'>III. 应用场景（捕获access.log日志里的异常IP）</a></li><li class='toc-level2'><a href='15395.html#管道的概念'>IV. 管道的概念</a></li><li class='toc-level2'><a href='15395.html#标准流&amp;文件描述符'>V. 标准流&amp;文件描述符</a></li><li class='toc-level2'><a href='15395.html#标准重定向示例'>VI. 标准重定向示例</a></li></ul></li></ul></div></div>

<hr><p><img src="../usr/uploads/2021/04/2923025823.png" alt="利用 sort 和 uniq 以及 awk 命令分析日志（如从网站的访问日志 access.log 找出异常IP）" /></p>
<h2 id="主理人说（提取日志/捕获&amp;提交异常IP）">I. 主理人说（提取日志/捕获&amp;提交异常IP）</h2>
<p><div class="tip inlineBlock success">利用 sort 和 uniq 以及 awk 命令分析日志，找出那些异常IP（单位时间内重复多次请求资源的IP，多次是多少次？1分钟1000次，100次等等）；本文将无缝衔接以下两篇文章；提取需要进行分析的日志（如access.log），捕获异常IP，提交异常IP至Cloudflare；赛高！</div>
<p><strong>提取access.log 一定时间段内的日志可参考下文：</strong><br />
<div class="preview">
<div class="post-inser post box-shadow-wrap-normal">
<a href="15378.html" target="_blank" class="post_inser_a no-external-link">
<div class="inner-image bg" style="background-image: url(../usr/uploads/2020/01/1957848217.jpg);background-size: cover;"></div>
<div class="inner-content">
<p class="inser-title">利用sed和date命令截取一定时间范围内的日志（如网站的访问日志 access.log）</p>
<div class="inster-summary text-muted">
主理人序 如你所知道的，日志必有时间，以及接连一串行为参数，记录你在某个时间段用什么方法，干了什么事；我们可以利用...
</div>
</div>
</a>

</div>

</div></p>
<p><strong>提交异常IP到Cloudflare</strong>：</p>
<p><div class="preview">
<div class="post-inser post box-shadow-wrap-normal">
<a href="15330.html" target="_blank" class="post_inser_a no-external-link">
<div class="inner-image bg" style="background-image: url(../usr/uploads/2019/12/2377344071.jpg);background-size: cover;"></div>
<div class="inner-content">
<p class="inser-title">Cloudflare 常用API - 批量提交恶意IP并执行相应操作（block, challenge, whitelist, js_challenge）</p>
<div class="inster-summary text-muted">
主理人序这是一个免费的，对所有用户等级开放的防火墙访问规则创建API，使用该API可自由创建IP访问规则；Clou...
</div>
</div>
</a>

</div>

</div></p>
<h2 id="命令行工具介绍（awk/sort/uniq）">II. 命令行工具介绍（awk/sort/uniq）</h2>
<p>sort、uniq、awk命令；awk 可以提取某个多行文本某一列的值，sort 可以对多行文本进行重新排序（如依照数值的大小排序；），uniq 可以对多行文本进行重复次数统计；</p>
<h3>awk 命令介绍</h3>
<p><img src="../usr/uploads/2021/04/1801028998.jpg" alt="awk.jpg" /></p>
<p>awk是一种编程语言，用于在linux/unix下对文本和数据进行处理。数据可以来自标准输入(stdin)、一个或多个文件，或其它命令的输出。它支持用户自定义函数和动态正则表达式等先进功能，是linux/unix下的一个强大编程工具。它在命令行中使用，但更多是作为脚本来使用。awk有很多内建的功能，比如数组、函数等，这是它和C语言的相同之处，灵活性是awk最大的优势。</p>
<p>之所以叫 AWK 是因为其取了三位创始人 Alfred Aho，Peter Weinberger, 和 Brian Kernighan 的 Family Name 的首字符。</p>
<p><strong>打印每一行的第二和第三个字段：</strong></p>
<pre><code>awk '{ print $2,$3 }' filename</code></pre>
<pre><code>$n 当前记录的第n个字段，比如n为1表示第一个字段，n为2表示第二个字段。 
$0 这个变量包含执行过程中当前行的文本内容。</code></pre>
<p><strong>awk运算与判断</strong></p>
<p><strong>关系运算符</strong> </p>
<table>
<thead>
<tr>
<th style="text-align: left;">运算符</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">&lt; &lt;= &gt; &gt;= != ==</td>
<td style="text-align: left;">关系运算符</td>
</tr>
</tbody>
</table>
<p>例：</p>
<pre><code>awk 'BEGIN{a=11;if(a &gt;= 9){print "ok";}}'
ok</code></pre>
<p>或等价于</p>
<pre><code>awk '{if($1&gt;'3') print $2}' filename </code></pre>
<p>即如果<strong>$1字段</strong>对应的<strong>值</strong>大于3则返回<strong>结果值</strong>等于$2对应的<strong>值</strong>；</p>
<pre><code>cat example.txt
4 99
5 101
1 3

awk '{if($1&gt;'3') print $2}' example.txt
99
101</code></pre>
<pre><code>$n 当前记录的第n个字段，比如n为1表示第一个字段，n为2表示第二个字段。 </code></pre>
<p>via <a href="../go/aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvYXdr" target="_blank">awk命令</a>；<a href="https://limbopro.com/usr/uploads/2021/04/3736196755.pdf" target="_blank">awk命令_Linux awk 命令用法详解：文本和数据进行处理的编程语言.pdf</a></p>
<h3>sort命令</h3>
<p>sort命令是在Linux里非常有用，它将文件进行排序，并将排序结果标准输出。sort命令既可以从特定的文件，也可以从stdin中获取输入。</p>
<p><strong>语法</strong></p>
<pre><code>sort(选项)(参数)</code></pre>
<p><strong>选项</strong></p>
<pre><code>-b：忽略每行前面开始出的空格字符；
-c：检查文件是否已经按照顺序排序；
-d：排序时，处理英文字母、数字及空格字符外，忽略其他的字符；
-f：排序时，将小写字母视为大写字母；
-i：排序时，除了040至176之间的ASCII字符外，忽略其他的字符；
-m：将几个排序号的文件进行合并；
-M：将前面3个字母依照月份的缩写进行排序；
-n：依照数值的大小排序；
-o&lt;输出文件&gt;：将排序后的结果存入制定的文件；
-r：以相反的顺序来排序；
-t&lt;分隔字符&gt;：指定排序时所用的栏位分隔字符；
+&lt;起始栏位&gt;-&lt;结束栏位&gt;：以指定的栏位来排序，范围由起始栏位到结束栏位的前一栏位。</code></pre>
<p><div class="tip inlineBlock info">参数即文件：<strong>指定待排序的文件列表</strong>。</div>
<pre><code>sort -n filename</code></pre>
<p>via <a href="../go/aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvc29ydA==" target="_blank">sort命令</a>；<a href="https://limbopro.com/usr/uploads/2021/04/2069018995.pdf" target="_blank">sort命令_Linux sort 命令用法详解：将文件进行排序并输出.pdf</a>；</p>
<h3>uniq命令</h3>
<p>uniq命令用于报告或忽略文件中的重复行，一般与sort命令结合使用。</p>
<p><strong>语法</strong> </p>
<pre><code>uniq(选项)(参数)</code></pre>
<p><strong>选项</strong> </p>
<pre><code>-c或——count：在每列旁边显示该行重复出现的次数；
-d或--repeated：仅显示重复出现的行列；
-f&lt;栏位&gt;或--skip-fields=&lt;栏位&gt;：忽略比较指定的栏位；
-s&lt;字符位置&gt;或--skip-chars=&lt;字符位置&gt;：忽略比较指定的字符；
-u或——unique：仅显示出一次的行列；
-w&lt;字符位置&gt;或--check-chars=&lt;字符位置&gt;：指定要比较的字符。</code></pre>
<p><strong>参数</strong><br />
输入文件：指定要去除的重复行文件。如果不指定此项，则从标准读取数据；<br />
输出文件：指定要去除重复行后的内容要写入的输出文件。如果不指定此选项，则将内容显示到标准输出设备（显示终端）。</p>
<p><strong>统计各行在文件中出现的次数：</strong></p>
<pre><code>sort file.txt | uniq -c</code></pre>
<p><div class="tip inlineBlock success">先排序，后统计；</div>
<p>via <a href="../go/aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvdW5pcQ==" target="_blank">uniq命令</a>；<a href="https://limbopro.com/usr/uploads/2021/04/4123269736.pdf" target="_blank">uniq命令_Linux uniq 命令用法详解：报告或忽略文件中的重复行.pdf</a></p>
<h2 id="应用场景（捕获access.log日志里的异常IP）">III. 应用场景（捕获access.log日志里的异常IP）</h2>
<p>假设我们已经提取出了相应日志：假设对应日志文件名为<code>1min-access.log</code>，其内容如下；</p>
<pre><code>219.25.120.201 - - [06/Apr/2021:09:20:10 +0800] "GET //feed HTTP/1.1" 200 27401 "https://limbopro.com//feed" "FreshRSS/1.18.0 (Linux; https://freshrss.org)"
23.116.47.198 - - [06/Apr/2021:09:20:13 +0800] "GET /archives/10713.html HTTP/1.1" 200 25543 "https://www.google.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
128.162.142.226 - - [06/Apr/2021:09:20:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Go-http-client/1.1"
223.242.140.34 - - [06/Apr/2021:09:20:25 +0800] "GET /archives/3629.html HTTP/1.1" 200 35789 "https://www.google.co.jp/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
252.157.251.20 - - [06/Apr/2021:09:20:27 +0800] "GET /865.html HTTP/1.1" 200 37710 "-" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
22.247.181.29 - - [06/Apr/2021:09:20:33 +0800] "GET /feed/ HTTP/1.1" 200 27402 "https://limbopro.com/" "Mozilla/5.0 (compatible; inoreader.com; 27 subscribers)"
203.116.47.198 - - [06/Apr/2021:09:20:35 +0800] "GET /btsearch.html HTTP/1.1" 200 5043 "https://limbopro.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
203.157.251.10 - - [06/Apr/2021:09:20:39 +0800] "GET /category/NSFW/ HTTP/1.1" 200 15891 "-" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
203.157.251.21 - - [06/Apr/2021:09:20:46 +0800] "HEAD / HTTP/1.1" 200 0 "-" "curl/7.68.0"
203.187.252.21 - - [06/Apr/2021:09:21:01 +0800] "GET /feed HTTP/1.1" 200 27401 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3837.0 Safari/537.36 Edg/77.0.211.2"
34.41.212.26 - - [06/Apr/2021:09:21:02 +0800] "HEAD / HTTP/1.1" 200 0 "-" "curl/7.68.0"
35.10.14.41 - - [06/Apr/2021:09:21:05 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPhone12,3; iOS 14.4.2)"
35.40.214.66 - - [06/Apr/2021:09:21:05 +0800] "GET /Adblock4limbo.conf HTTP/1.1" 200 12292 "-" "Quantumult%20X/1.0.20 (iPhone12,3; iOS 14.4.2)"
203.182.140.34 - - [06/Apr/2021:09:21:11 +0800] "GET /archives/11773.html HTTP/1.1" 200 29060 "https://limbopro.com/archives/3629.html" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
242.57.200.186 - - [06/Apr/2021:09:21:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
242.57.200.186 - - [06/Apr/2021:09:21:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
242.57.200.186 - - [06/Apr/2021:09:21:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
213.157.251.2 - - [06/Apr/2021:09:21:15 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
213.157.251.2 - - [06/Apr/2021:09:21:15 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
229.57.220.156 - - [06/Apr/2021:09:21:19 +0800] "GET /Adblock4limbo.conf HTTP/1.1" 200 12292 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
145.176.190.152 - - [06/Apr/2021:09:21:25 +0800] "GET /archives/clashA.html HTTP/1.1" 200 25177 "https://www.google.com/" "Mozilla/5.0 (Linux; Android 10; ONEPLUS A6000) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.105 Mobile Safari/537.36"
223.147.211.21 - - [06/Apr/2021:09:21:34 +0800] "GET /category/by-nc-sa.png HTTP/1.1" 404 1707 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
223.57.111.134 - - [06/Apr/2021:09:21:42 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
219.25.120.201 - - [06/Apr/2021:09:20:10 +0800] "GET //feed HTTP/1.1" 200 27401 "https://limbopro.com//feed" "FreshRSS/1.18.0 (Linux; https://freshrss.org)"
23.116.47.198 - - [06/Apr/2021:09:20:13 +0800] "GET /archives/10713.html HTTP/1.1" 200 25543 "https://www.google.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
128.162.142.226 - - [06/Apr/2021:09:20:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Go-http-client/1.1"
223.242.140.34 - - [06/Apr/2021:09:20:25 +0800] "GET /archives/3629.html HTTP/1.1" 200 35789 "https://www.google.co.jp/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
252.157.251.20 - - [06/Apr/2021:09:20:27 +0800] "GET /865.html HTTP/1.1" 200 37710 "-" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
22.247.181.29 - - [06/Apr/2021:09:20:33 +0800] "GET /feed/ HTTP/1.1" 200 27402 "https://limbopro.com/" "Mozilla/5.0 (compatible; inoreader.com; 27 subscribers)"
203.116.47.198 - - [06/Apr/2021:09:20:35 +0800] "GET /btsearch.html HTTP/1.1" 200 5043 "https://limbopro.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36"
203.157.251.10 - - [06/Apr/2021:09:20:39 +0800] "GET /category/NSFW/ HTTP/1.1" 200 15891 "-" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
203.157.251.21 - - [06/Apr/2021:09:20:46 +0800] "HEAD / HTTP/1.1" 200 0 "-" "curl/7.68.0"
203.187.252.21 - - [06/Apr/2021:09:21:01 +0800] "GET /feed HTTP/1.1" 200 27401 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3837.0 Safari/537.36 Edg/77.0.211.2"
34.41.212.26 - - [06/Apr/2021:09:21:02 +0800] "HEAD / HTTP/1.1" 200 0 "-" "curl/7.68.0"
35.10.14.41 - - [06/Apr/2021:09:21:05 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPhone12,3; iOS 14.4.2)"
35.40.214.66 - - [06/Apr/2021:09:21:05 +0800] "GET /Adblock4limbo.conf HTTP/1.1" 200 12292 "-" "Quantumult%20X/1.0.20 (iPhone12,3; iOS 14.4.2)"
203.182.140.34 - - [06/Apr/2021:09:21:11 +0800] "GET /archives/11773.html HTTP/1.1" 200 29060 "https://limbopro.com/archives/3629.html" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
242.57.200.186 - - [06/Apr/2021:09:21:14 +0800] "GET /Adblock4limbo.list HTTP/1.1" 200 3068 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
213.157.251.2 - - [06/Apr/2021:09:21:15 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
229.57.220.156 - - [06/Apr/2021:09:21:19 +0800] "GET /Adblock4limbo.conf HTTP/1.1" 200 12292 "-" "Quantumult%20X/1.0.20 (iPad11,1; iOS 14.4.1)"
145.176.190.152 - - [06/Apr/2021:09:21:25 +0800] "GET /archives/clashA.html HTTP/1.1" 200 25177 "https://www.google.com/" "Mozilla/5.0 (Linux; Android 10; ONEPLUS A6000) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.105 Mobile Safari/537.36"
223.147.211.21 - - [06/Apr/2021:09:21:34 +0800] "GET /category/by-nc-sa.png HTTP/1.1" 404 1707 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"
223.57.111.134 - - [06/Apr/2021:09:21:42 +0800] "GET /archives/15154.html?_pjax=%23content HTTP/1.1" 200 23037 "https://limbopro.com/category/NSFW/" "Mozilla/5.0 (Linux; U; Android 10; zh-Hans-CN; PCT-AL10 Build/HUAWEIPCT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/78.0.3904.108 Quark/4.8.3.173 Mobile Safari/537.36"</code></pre>
<p>1.现在，利用 awk 命令 取其<code>第一列值</code>，<code>awk '{print $1}'</code>；</p>
<pre><code>awk '{print $1}' 1min-access.log</code></pre>
<p>返回结果为：</p>
<pre><code>219.25.120.201
23.116.47.198
128.162.142.226
223.242.140.34
252.157.251.20
22.247.181.29
203.116.47.198
203.157.251.10
203.157.251.21
203.187.252.21
34.41.212.26
35.10.14.41
35.40.214.66
203.182.140.34
242.57.200.186
242.57.200.186
242.57.200.186
213.157.251.2
213.157.251.2
229.57.220.156
145.176.190.152
223.147.211.21
223.57.111.134
219.25.120.201
23.116.47.198
128.162.142.226
223.242.140.34
252.157.251.20
22.247.181.29
203.116.47.198
203.157.251.10
203.157.251.21
203.187.252.21
34.41.212.26
35.10.14.41
35.40.214.66
203.182.140.34
242.57.200.186
213.157.251.2
229.57.220.156
145.176.190.152
223.147.211.21
223.57.111.134</code></pre>
<p>2.下面我们 <strong>在上一个命令的基础上继续追加命令</strong>；利用 <code>sort -n</code> （依照数值的大小排序；）在得到上述结果后对结果进行排序，为什么要排序？为了下一步对重复IP进行统计；</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n</code></pre>
<p>得到结果如下，是否重复一目了然：</p>
<pre><code>22.247.181.29
22.247.181.29
23.116.47.198
23.116.47.198
34.41.212.26
34.41.212.26
35.10.14.41
35.10.14.41
35.40.214.66
35.40.214.66
128.162.142.226
128.162.142.226
145.176.190.152
145.176.190.152
203.116.47.198
203.116.47.198
203.157.251.10
203.157.251.10
203.157.251.21
203.157.251.21
203.182.140.34
203.182.140.34
203.187.252.21
203.187.252.21
213.157.251.2
213.157.251.2
213.157.251.2
219.25.120.201
219.25.120.201
223.147.211.21
223.147.211.21
223.242.140.34
223.242.140.34
223.57.111.134
223.57.111.134
229.57.220.156
229.57.220.156
242.57.200.186
242.57.200.186
242.57.200.186
242.57.200.186
252.157.251.20
252.157.251.20</code></pre>
<p>3.在上一个命令的基础上追加命令，利用 <code>uniq -c</code> 命令<strong>统计上述结果中的各个IP重复的次数</strong>；</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n | uniq -c</code></pre>
<p>得到结果如下，某某IP重复次数是多少一目了然：</p>
<pre><code>2 22.247.181.29
2 23.116.47.198
2 34.41.212.26
2 35.10.14.41
2 35.40.214.66
2 128.162.142.226
2 145.176.190.152
2 203.116.47.198
2 203.157.251.10
2 203.157.251.21
2 203.182.140.34
2 203.187.252.21
3 213.157.251.2
2 219.25.120.201
2 223.147.211.21
2 223.242.140.34
2 223.57.111.134
2 229.57.220.156
4 242.57.200.186
2 252.157.251.20</code></pre>
<p>4.在上一个命令的基础上追加命令，利用 awk 配合 if 命令判断 以取得满足条件的结果；<code>awk '{if($1&gt;='$Maxrequest') print $2}'</code>，其中 <code>$Maxrequest</code> 是变量，可以是任意正整数（如3），取出重复次数大于等于3的IP，其中<code>$1</code>代表取第一列值，假设第一列值满足条件如大于等于3则返回对应第二列值；</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n | uniq -c | awk '{if($1&gt;='3') print $2}'</code></pre>
<p>得到结果如下：</p>
<pre><code>213.157.251.2
242.57.200.186</code></pre>
<p>Get?</p>
<p>现在，你应该是想<strong>把这些异常IP存储到一个小文本</strong>，例如<code>badip.txt</code>；</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n | uniq -c | awk '{if($1&gt;='$Maxrequest') print $2}' &gt; badip.txt</code></pre>
<p><div class="tip inlineBlock info">文本文件存储的位置可根据需要自行拟定；关于<strong>终端命令的结果输出/输入的使用方法可参考</strong>：<a href="../go/aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1zaGVsbC1pby1yZWRpcmVjdGlvbnMuaHRtbA==" target="_blank">Shell 输入/输出重定向</a>；<a href="https://limbopro.com/usr/uploads/2021/04/2689236751.pdf" target="_blank">Shell 输入_输出重定向.pdf</a>；</div>
<p><div class="tip inlineBlock info">其中 $Maxrequest 可取任意正整数值，具体就要看各位了，一分钟刷新几次页面算是正常，我觉得大于60次就有点不正常了；具体情况具体分析，这就涉及到额外的策略选择了；</div>
<p><div class="tip inlineBlock share">具体日志及文本路径请根据实际情况填写；</div>
<h2 id="管道的概念">IV. 管道的概念</h2>
<p>管道 <code>|</code>，将前一个命令的输出作为标准输入传给后面的命令，不会用到任何中间文件与缓冲区。</p>
<pre><code>awk '{print $1}' 1min-access.log | sort -n</code></pre>
<p>管道<code>|</code> 即将 <code>awk '{print $1}' 1min-access.log</code> 的结果输出作为标准输入传给后面的命令<code>sort -n</code>，Get 到了吗？；</p>
<h2 id="标准流&amp;文件描述符">V. 标准流&amp;文件描述符</h2>
<p><div class="tip inlineBlock info">在《c程序设计语言》中，有这么一句话：当命令解释程序（即shell）运行一个程序的时候，它将打开三个文件，对应当<strong><a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JTk2JTg3JUU0JUJCJUI2JUU2JThGJThGJUU4JUJGJUIwJUU3JUFDJUE2" target="_blank">文件描述符</a></strong>分别为0，1，2，依次表示标准输入、标准输出、标准错误（标准流）。</div>
<h4>标准输入 (stdin)</h4>
<pre><code>$ awk '{print $1}' 1min-access.log</code></pre>
<p><strong>白话文解释</strong>：你在终端输入的上述命令，即为标准输入；</p>
<p>标准输入是指输入至程式的资料（通常是文件）。程式要求以<em>读</em>(read)操作来传输资料。并非所有程式都要求输入。如<em>dir</em>或<em>ls</em>程式（显示一个目录中的档名）运行时不用任何输入。</p>
<p>除非<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3cvaW5kZXgucGhwP3RpdGxlPemHjeWwjuWQkSZhY3Rpb249ZWRpdCZyZWRsaW5rPTE=" target="_blank">重定向</a>，输入是预期由 <a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv6Y2155uk" target="_blank">键盘</a>取得的。</p>
<h4>标准输出 (stdout)</h4>
<p><strong>白话文解释</strong>：你所执行的每一项shell命令，终端都会有相应执行结果被打印出来，这就是所谓的标准输出；</p>
<pre><code>$ awk '{print $1}' 1min-access.log
219.25.120.201
23.116.47.198
128.162.142.226
223.242.140.34
252.157.251.20
22.247.181.29</code></pre>
<p>标准输出是指程式写输出资料的串流。程式要求资料传输使用写的运算。并非所有程式都要求输出。如mv或ren程式在成功完成时是沉默的。</p>
<p>除非重定向，输出为 终端。</p>
<h4>标准错误输出 (stderr)</h4>
<p>标准错误输出是另一输出串流，用于输出错误讯息或诊断。它独立于标准输出，且可以分别被重导。常见的目的则为启始这个程式的终端，即使其标准输出被重导亦如此。例如：一个管线中的程式的输出被重导到下一个程式，但错误讯息仍然直接流向文字终端机。</p>
<p>把标准输出和标准错误输出导到相同的目的地，如文字终端，是可以（且正常）的。讯息会以如同程式写入的顺序来出现，除非使用了缓冲。（例如，一个常见状况是，当标准错误串流未使用缓冲，但标准输出串流使用了缓冲；在这种情况下，如果标准输出的缓冲区还没满的话，较迟写到标准错误的文字可能会较早出现在终端。</p>
<h4>标准输出重定向</h4>
<pre><code>awk '{print $1}' 1min-access.log | sort -n | uniq -c | awk '{if($1&gt;='$Maxrequest') print $2}' &gt; badip.txt</code></pre>
<p><strong>输出重定向(stdout redirection)</strong>，将本来应该终端打印出来的输出结果存储到了指定文件的动作即为输出重定向，此时我们是在终端看不到输出结果的；</p>
<p>大多数 UNIX 系统命令从你的终端接受输入并将所产生的输出发送回​​到您的终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p>
<p><a href="https://limbopro.com/usr/uploads/2021/04/3686232488.pdf" target="_blank" target="_blank">Shell 输入_输出重定向.pdf</a>；<a href="../go/aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1zaGVsbC1pby1yZWRpcmVjdGlvbnMuaHRtbA==" target="_blank">Shell 输入/输出重定向</a>；</p>
<p>via <a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JUE4JTk5JUU2JUJBJTk2JUU0JUI4JUIyJUU2JUI1JTgx" target="_blank">标准流</a>；</p>
<h3>文件描述符</h3>
<p>文件描述符在形式上是一个非负整数。实际上，它是一个索引值，指向<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv5YaF5qC4" target="_blank">内核</a>为每一个<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv6L+b56iL" target="_blank">进程</a>所维护的该进程打开文件的记录表。当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符。在<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv56iL5bqP6K6+6K6h" target="_blank">程序设计</a>中，一些涉及底层的程序编写往往会围绕着文件描述符展开。但是文件描述符这一概念往往只适用于<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvVU5JWA==" target="_blank">UNIX</a>、<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvTGludXg=" target="_blank">Linux</a>这样的操作系统。</p>
<p>每个Unix进程（除了可能的<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kv5a6I5oqk6L+b56iL" target="_blank">守护进程</a>）应均有三个标准的<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvUE9TSVg=" target="_blank">POSIX</a>文件描述符，对应于三个标准流：</p>
<table>
<thead>
<tr>
<th style="text-align: center;">整数值</th>
<th style="text-align: center;">名称</th>
<th style="text-align: center;">&lt;<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvVW5pc3RkLmg=" target="_blank">unistd.h</a>&gt;符号常量<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMv5paH5Lu25o+P6L+w56ymI2NpdGVfbm90ZS0x" target="_blank">[1]</a></th>
<th style="text-align: center;">&lt;<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvU3RkaW8uaA==" target="_blank">stdio.h</a>&gt;文件流<a href="https://limbopro.com/go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMv5paH5Lu25o+P6L+w56ymI2NpdGVfbm90ZS0y" target="_blank">[2]</a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;"><a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvU3RkaW4=" target="_blank">Standard input</a></td>
<td style="text-align: center;">STDIN_FILENO</td>
<td style="text-align: center;">stdin</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvU3Rkb3V0" target="_blank">Standard output</a></td>
<td style="text-align: center;">STDOUT_FILENO</td>
<td style="text-align: center;">stdout</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvU3RkZXJy" target="_blank">Standard error</a></td>
<td style="text-align: center;">STDERR_FILENO</td>
<td style="text-align: center;">stderr</td>
</tr>
</tbody>
</table>
<p>via <a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JTk2JTg3JUU0JUJCJUI2JUU2JThGJThGJUU4JUJGJUIwJUU3JUFDJUE2IyVFNiU5NiU4NyVFNCVCQiVCNiVFNiU4RiU4RiVFOCVCRiVCMCVFNyVBQyVBNiVFNyU5QSU4NCVFNyU5NCU5RiVFNiU4OCU5MA==" target="_blank">文件描述符</a>；</p>
<p>STDIN是标准输入，默认从键盘读取信息；<br />
STDOUT是标准输出，默认将输出结果输出至终端；<br />
STDERR是标准错误，默认将输出结果输出至终端。</p>
<p>参阅：<a href="../go/aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU2JUE4JTk5JUU2JUJBJTk2JUU0JUI4JUIyJUU2JUI1JTgx" target="_blank">标准流</a>；</p>
<h2 id="标准重定向示例">VI. 标准重定向示例</h2>
<p>大多数 UNIX 系统命令从你的终端接受输入并将所产生的输出发送回​​到您的终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p>
<p>重定向命令列表如下：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">命令</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">command &gt; file</td>
<td style="text-align: left;">将输出重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">command &lt; file</td>
<td style="text-align: left;">将输入重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">command &gt;&gt; file</td>
<td style="text-align: left;">将输出以追加的方式重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">n &gt; file</td>
<td style="text-align: left;">将文件描述符为 n 的文件重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">n &gt;&gt; file</td>
<td style="text-align: left;">将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
</tr>
<tr>
<td style="text-align: left;">n &gt;&amp; m</td>
<td style="text-align: left;">将输出文件 m 和 n 合并。</td>
</tr>
<tr>
<td style="text-align: left;">n &lt;&amp; m</td>
<td style="text-align: left;">将输入文件 m 和 n 合并。</td>
</tr>
<tr>
<td style="text-align: left;">&lt;&lt; tag</td>
<td style="text-align: left;">将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
</tr>
</tbody>
</table>
<p>command 代表要执行的指令、命令；如：</p>
<pre><code>$ awk '{print $1}' 1min-access.log</code></pre>
<p>示例：</p>
<pre><code>$ awk '{print $1}' 1min-access.log &gt; ip-list.txt</code></pre>
<p>将得到的IP重定向输出到文本文件 <code>ip-list.txt</code>；</p>
<p>更多姿势参阅：<a href="https://limbopro.com/usr/uploads/2021/04/3686232488.pdf" target="_blank" target="_blank">Shell 输入_输出重定向.pdf</a>；<a href="../go/aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1zaGVsbC1pby1yZWRpcmVjdGlvbnMuaHRtbA==" target="_blank">Shell 输入/输出重定向</a>；</p><hr class="content-copyright" style="margin-top:50px" /><blockquote class="content-copyright" style="font-style:normal"><p class="content-copyright">版权属于：毒奶 <br><p class="content-copyright">联系我们：<a class="content-copyright" href="../6.html" target="_blank" target="_blank">https://limbopro.com/6.html</a><br>毒奶搜索：<a class="content-copyright" href="../search.html" target="_blank" target="_blank">https://limbopro.com/search.html</a> <br>毒奶导航：<a class="content-copyright" href="../daohang/index.html" target="_blank" target="_blank">https://limbopro.com/daohang/index.html</a> </p></p><p class="content-copyright">本文链接：<a class="content-copyright" href="15395.html" target="_blank">https://limbopro.com/archives/15395.html</a></p><p class="content-copyright"><p class="content-copyright"><a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh-Hans" target="_blank" target="_blank" target="_blank"><img alt="知识共享许可协议" style="border-width:0" src="../by-nc-sa.png"></a><br>本文采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh-Hans" target="_blank" target="_blank" target="_blank">CC BY-NC-SA 4.0 许可协议</a>，转载或引用本文时请遵守许可协议，注明出处、不得用于商业用途！</p></blockquote></div>
</div>
</div>

<script type="text/javascript">
(function () {
    window.TypechoComment = {
        dom : function (id) {
            return document.getElementById(id);
        },
    
        create : function (tag, attr) {
            var el = document.createElement(tag);
        
            for (var key in attr) {
                el.setAttribute(key, attr[key]);
            }
        
            return el;
        },

        reply : function (cid, coid) {
            var comment = this.dom(cid), parent = comment.parentNode,
                response = this.dom('respond-post-15395'), input = this.dom('comment-parent'),
                form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                textarea = response.getElementsByTagName('textarea')[0];

            if (null == input) {
                input = this.create('input', {
                    'type' : 'hidden',
                    'name' : 'parent',
                    'id'   : 'comment-parent'
                });

                form.appendChild(input);
            }

            input.setAttribute('value', coid);

            if (null == this.dom('comment-form-place-holder')) {
                var holder = this.create('div', {
                    'id' : 'comment-form-place-holder'
                });

                response.parentNode.insertBefore(holder, response);
            }

            comment.appendChild(response);
            this.dom('cancel-comment-reply-link').style.display = '';

            if (null != textarea && 'text' == textarea.name) {
                textarea.focus();
            }

            return false;
        },

        cancelReply : function () {
            var response = this.dom('respond-post-15395'),
            holder = this.dom('comment-form-place-holder'), input = this.dom('comment-parent');

            if (null != input) {
                input.parentNode.removeChild(input);
            }

            if (null == holder) {
                return true;
            }

            this.dom('cancel-comment-reply-link').style.display = 'none';
            holder.parentNode.insertBefore(response, holder);
            return false;
        }
    };
})();
</script>
<script type="text/javascript">
var registCommentEvent = function() {
    var event = document.addEventListener ? {
        add: 'addEventListener',
        focus: 'focus',
        load: 'DOMContentLoaded'
    } : {
        add: 'attachEvent',
        focus: 'onfocus',
        load: 'onload'
    };
    var r = document.getElementById('respond-post-15395');
        
    if (null != r) {
        var forms = r.getElementsByTagName('form');
        if (forms.length > 0) {
            var f = forms[0], textarea = f.getElementsByTagName('textarea')[0], added = false;

            if (null != textarea && 'text' == textarea.name) {
                textarea[event.add](event.focus, function () {
                    if (!added) {
                        var input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = '_';
                            input.value = (function () {
    var _00ti = 'df'//'MAs'
+'a23'//'tA'
+//'vSO'
'56b'+'e'//'8'
+'v'//'v'
+/* '9'//'9' */''+''///*'X'*/'X'
+//'3'
'81'+//'oSD'
'oSD'+//'EGA'
'a9b'+//'Iwh'
'4e5'+'f6'//'L'
+'5'//'J'
+//'5gq'
'b20'+'28f'//'28f'
+//'R'
'2f'+'se9'//'se9'
+//'hba'
'6'+//'Ksk'
'053'+'0f0'//'7z'
, _hp8 = [[9,10],[11,14],[23,26],[25,28]];
    
    for (var i = 0; i < _hp8.length; i ++) {
        _00ti = _00ti.substring(0, _hp8[i][0]) + _00ti.substring(_hp8[i][1]);
    }

    return _00ti;
})();
                    
                        f.appendChild(input);
                        
                        input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = 'checkReferer';
                        input.value = 'false';
                        
                        f.appendChild(input);
                        

                        added = true;
                    }
                });
            }
        }
    }
};
</script></div>
<footer id="footer" class="app-footer" role="footer">
<div class="wrapper bg-light">
<span class="pull-right hidden-xs text-ellipsis">

<a target="_blank" href="https://www.cloudflare.com"><img src="../usr/uploads/2021/07/2816325337.png" style="width: 50px;"></a>
<a target="_blank" href="https://github.com/limbopro/"><img src="../usr/uploads/2021/07/3392286942.png" style="width: 40px;"></a>
273.60 W 字符
丨2人在线丨 
Powered by <a target="_blank" href="http://www.typecho.org">Typecho</a>&nbsp;|&nbsp;Theme by <a target="_blank" href="https://www.ihewro.com/archives/489/">handsome</a>
</span>
<span class="text-ellipsis">&copy;&nbsp;2022 毒奶.inc Copyright&nbsp; 
</span>
</div>

<script type="text/template" id="tmpl-customizer">
          <div class="settings panel panel-default setting_body_panel" aria-hidden="true">
              <button class="fix-padding btn btn-default no-shadow pos-abt border-radius-half-left"
                      data-toggle="tooltip" data-placement="left" data-original-title="外观设置"
                      data-toggle-class=".settings=active, .settings-icon=animate-spin">
                  <i class="fontello fontello-gear settings-icon"></i>
              </button>
              <div class="panel-heading">
                  <button class="pull-right btn btn-xs btn-rounded btn-danger " name="reset" data-toggle="tooltip"
                          data-placement="left" data-original-title="恢复默认值" >重置</button>
                  设置
              </div>
              <div class="setting_body">
              <div class="panel-body">
                  <# for ( var keys = _.keys( data.sections.settings ), i = 0, name; keys.length > i; ++i ) { #>
                      <div<# if ( i !== ( keys.length - 1 ) ) print( ' class="m-b-sm"' ); else print(' id="mode_set"')
                  #>>
                          <label class="i-switch bg-info pull-right">
                              <input type="checkbox" name="{{ keys[i] }}" <#
                              print( ' value="'+handsome_UI.mode+data
                              .defaults[keys[i]]+'"' )
                              if ((data.defaults[keys[i]]=="auto" && handsome_UI.mode =="dark") || data
                              .defaults[keys[i]] == true) print( ' checked="checked"' );
                              #> /> 
                                  <i></i>
                          </label>

                  <span> <# if(data.defaults[keys[i]]=="auto") print(LocalConst.DARK_MODE_AUTO); else if(data
                      .sections.settings[keys[i]] == LocalConst.DARK_MODE) {print(LocalConst.DARK_MODE_FIXED)
                      }else print(data.sections.settings[keys[i]]);#></span>
       <# if ( i == ( keys.length - 1 ) ) {print( ' <small id="auto_info"'); if(data.defaults[keys[i]]!=="auto") print(' style="display:none"') ;print('><i class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="bottom" data-original-title=""></i></small>')}; #>
              </div>
              <# } #>
          </div>
          <div class="wrapper b-t b-light bg-light lter r-b">
              <div class="row row-sm">
                  <div class="col-xs-4">
                      <#
                              _.each( data.sections.colors, function( color, i ) {
                              var newColumnBefore = ( i % 5 ) === 4;
                              #>
                          <label class="i-checks block<# if ( !newColumnBefore ) print( ' m-b-sm' ); #>">
                              <input type="radio" name="color" value="{{ i }}"<# if ( data.defaults['color'] === i ) print( ' checked="checked"' ); #> />
                                  <span class="block bg-light clearfix pos-rlt">
								<span class="active pos-abt w-full h-full bg-black-opacity text-center">
									<i class="fontello fontello-check text-md text-white m-t-xs"></i>
								</span>
								<b class="{{ color.navbarHeader }} header"></b>
								<b class="{{ color.navbarCollapse }} header"></b>
								<b class="{{ color.aside.replace( ' b-r', '' ) }}"></b>
							</span>
                          </label>
                          <#
                                  if ( newColumnBefore && ( i + 1 ) < data.sections.colors.length )
                          print( '</div><div class="col-xs-4">' );
                              } );
                              #>
                          </div>
                  </div>
              </div>
          </div>
          </div>
      </script>
<div class="topButton panel panel-default">
<button id="goToTop" class="fix-padding btn btn-default no-shadow pos-abt hide  border-radius-half-left" data-toggle="tooltip" data-placement="left" data-original-title="返回顶部">
<i class="fontello fontello-chevron-circle-up" aria-hidden="true"></i>
</button>
</div>
</footer>
</div>
<script>
                window.content_index_showTocToggle = true;
                function content_index_toggleToc() {
                    var tts = "显示";
                    var tth = "隐藏";
                    if (window.content_index_showTocToggle) {
                        window.content_index_showTocToggle = false;
                        document.getElementById("toc-content").style.display = "none";
                        document.getElementById("content-index-togglelink").innerHTML = tts
                    } else {
                        window.content_index_showTocToggle = true;
                        document.getElementById("toc-content").style.display = "block";
                        document.getElementById("content-index-togglelink").innerHTML = tth
                    }
                }
            </script>

<style>
        #mode_set{
            display: none;
        }
    </style>

<script>
    SearchConfig = {
        url: "https://limbopro.com/usr/plugins/Preference/cache/search.json"
    }
</script>
<script src="../usr/themes/handsome/assets/js/function.min.js?v=7.3.12020081501"></script>
<script src="../usr/themes/handsome/assets/js/core.min.js?v=7.3.12020081501"></script>
<script>
    if ('serviceWorker' in navigator) {
        if (LocalConst.USE_CACHE) {
            navigator.serviceWorker.addEventListener('controllerchange', function (ev) {
                try {
                    $.message({
                        title:"检测到本地缓存需要更新",
                        message:"<a href='15395.html#' onclick='window.location.reload();'>点击刷新页面</a>更新本地缓存",
                        type:'warning',
                        time: '300000'
                    });
                }catch (e) {
                }
            });
        }
    }

</script>

<script src="../usr/themes/handsome/assets/js/features/jquery.pjax.min.js" type="text/javascript"></script>
<script type="text/javascript" src="../usr/themes/handsome/codecopy.js"></script>



<script type="text/javascript">
    </script>

</body>
</html>

